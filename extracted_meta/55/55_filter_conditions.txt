## Bot Tickets Counts (Includes Dropoff)

This metric tracks the total volume of bot-generated support tickets across different lines of business (LOB), including tickets where customers may have dropped off during the bot interaction. It serves as a key operational indicator for customer service teams to understand bot engagement patterns and support volume distribution across business segments. The count includes all bot tickets regardless of resolution status, providing visibility into the overall demand on automated support systems. This metric helps identify which LOBs generate the most bot interactions and can inform resource allocation and bot optimization strategies.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - includes all time periods and LOBs

--- specific filters
--- temporal filter set to include all dates
--- no additional filters specified

--- calculation_logic
sum(virtual_table.bot_ticket_count) as total_bot_tickets
group by virtual_table.lob




## Bot Tickets Counts (Includes Dropoff)

This metric tracks the total volume of bot-generated support tickets across different lines of business (LOB), including tickets where customers may have dropped off during the bot interaction. It serves as a key operational indicator for customer service teams to understand bot engagement patterns and support volume distribution across business segments. The count includes all bot tickets regardless of resolution status, providing visibility into the overall demand on automated support systems. This metric helps identify which LOBs generate the most bot interactions and can inform resource allocation and bot optimization strategies.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - includes all time periods and LOBs

--- specific filters
--- temporal filter set to include all dates
--- no additional filters specified

--- calculation_logic
sum(virtual_table.bot_ticket_count) as total_bot_tickets
group by virtual_table.lob




## QS_SB Pendency_final_substage_eventtime

This metric tracks the distribution and volume of QR code service requests (SB cases) across different pendency time buckets, processing stages, and substages within the Care Dashboard system. It measures how cases are aging by counting total case IDs grouped by days_bucket (likely representing how long cases have been pending), final_stage (current processing stage), and substage (detailed sub-process within each stage). This analysis helps identify bottlenecks in case resolution workflows, monitor service level agreements, and optimize resource allocation across different processing stages. The metric provides operational insights for care team management to understand where cases are accumulating and which stages require attention to improve overall case resolution efficiency.

-- tables_involved
team_servicesone.QR_SB_Daily_Pendency_Superset qsdp

--- standard filters to be applied unless specifically requested for a different categorical value
--- temporal filter currently set to no filter, showing all available case data
qsdp.case_date IS NOT NULL

--- specific filters
--- no additional specific filters applied in this chart

--- calculation_logic
count(qsdp.id) as case_count
group by qsdp.days_bucket, qsdp.final_stage, qsdp.substage
order by case_count desc




## QS_SB Pendency_final_substage_eventtime

This metric tracks the distribution of QR code and soundbox support cases by counting total cases across pendency age buckets, final processing stages, and sub-stages. It serves as a comprehensive view for customer care teams to understand case volume patterns and identify bottlenecks in the support workflow. The analysis groups cases by days_bucket (showing how long cases have been pending), final_stage (current processing stage), and substage (detailed sub-categories within each stage). With no temporal filters applied, it provides a complete snapshot of all cases in the system, helping prioritize resource allocation and process improvements. The data comes from a dedicated pendency tracking table that consolidates QR and soundbox case information for operational dashboards.

-- tables_involved
team_servicesone.QR_SB_Daily_Pendency_Superset virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- temporal filter available but currently set to no filter (all dates included)
virtual_table.case_date IS NOT NULL

--- specific filters
--- none applied - showing all case statuses and stages

--- calculation_logic
count(virtual_table.id) as case_count
group by virtual_table.days_bucket, virtual_table.final_stage, virtual_table.substage




## QS_SB Pendency_final_stage_eventtime

This metric tracks the count of Quick Settlement Soundbox (QS_SB) merchant support cases categorized by their final processing stage at event time. It measures merchant support case pendency across various workflow stages including callback attempts, service team assignments, courier logistics, KYC/MCC updates, and merchant dependencies. The classification system transforms raw status codes into business-meaningful categories like "Call Back Cases", "Pending with Service", "KYC Update", "Merchant Dependency", and "Pending with Courier" to enable operational monitoring of case resolution workflows. The temporal filter on case_date allows analysis across different time periods to track support case volume and stage distribution trends.

-- tables_involved
{schema.table_name} cases

--- standard filters to be applied unless specifically requested for a different categorical value
--- temporal filter on case creation date - currently set to show all periods
cases.case_date TEMPORAL_RANGE 'No filter'

--- calculation_logic
count(cases.id) as case_count,
CASE cases.status
  WHEN '129' THEN 'Pending for Callback'
  WHEN '130' THEN 'CallAttempted' 
  WHEN '145' THEN 'OTHER ISSUES'
  WHEN '152' THEN 'Parked to Merchant Loan IO team'
  ELSE cases.status
END AS status_mapped,
CASE
  WHEN cases.assign__c IN ('Merchant Setup', 'Gold Investment Plan', 'MHD-Riskops-QR', 'MHD Offline Chargeback cases') 
    THEN 'Merchant Setup/Risk_ops/Chargeback/Gold Investment'
  WHEN cases.status = 'Details pending from Merchant' THEN 'Merchant Dependency'
  WHEN cases.status IN ('Pending with Other Department', 'Responded from Department') 
    THEN 'Pending with other Department'
  WHEN cases.status = 'Re-Open' THEN 'Re-Open'
  WHEN cases.status = 'Merchant Response Received' THEN 'Merchant Response Received'
  WHEN cases.status = 'Pending for Resolution' AND cases.issue_L1 IN ('Payout & Settlement', 'Merchant Profile') AND cases.assign__c = 'Confirmation Pending'
    THEN 'DIY'
  WHEN cases.status = 'Pending for Resolution' AND cases.issue_L1 = 'Business Loan' AND cases.assign__c = 'Confirmation Pending'
    THEN 'Pending for Loan Disbursement'
  [Additional complex CASE logic for workflow stage categorization]
END AS final_stage_category




## Bot Tickets Count (Active Sessions)

This metric tracks the total count of active tickets being handled by bots across different lines of business (LOB). It provides visibility into bot workload distribution and operational capacity utilization within the customer care system. The metric aggregates all active bot sessions by summing bot_active_ticket_count values and segments results by LOB to enable comparison of bot utilization across business units. This helps identify which business lines have higher bot engagement and supports resource allocation decisions for automated customer service operations.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - showing all LOB segments

--- specific filters  
--- no specific filters applied - complete view across all business lines

--- calculation_logic
sum(bot_active_ticket_count) as total_bot_tickets,
group by lob




## Bot Tickets Count (Active Sessions)

This metric tracks the total count of active bot tickets across different lines of business within the Care Dashboard for MHD operations. It measures the current workload of automated customer service bots by summing active ticket counts, providing visibility into bot utilization and capacity across various business segments. The metric helps operations teams monitor real-time bot performance, identify peak usage periods, and ensure adequate automated support coverage. By segmenting data by LOB, it enables comparison of bot effectiveness and ticket volume distribution across different business areas, supporting resource allocation and operational decision-making for customer care automation.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - shows all active bot tickets across all LOBs

--- specific filters
--- no specific filters applied - aggregates all records

--- calculation_logic
sum(bot_active_ticket_count) as total_active_bot_tickets,
grouped by lob (line of business)




## Bot MSAT (%)

Bot MSAT (%) measures the mean satisfaction rate of bot interactions by calculating the percentage of positive bot responses out of total bot responses across different lines of business. This metric helps evaluate chatbot effectiveness and customer satisfaction with automated support interactions. The calculation uses NULLIF to prevent division by zero errors when there are no bot responses recorded. Results are segmented by line of business (lob) to enable performance comparison across different business units and identify areas where bot performance may need improvement.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - includes all bot interactions

--- specific filters
--- no specific filters applied - comprehensive view across all LOBs

--- calculation_logic
100 * SUM(bot_positive_response) / NULLIF(SUM(bot_total_responses), 0) as bot_msat_percentage




## Bot MSAT (%)

Bot MSAT percentage measures chatbot satisfaction rates by calculating the proportion of positive responses to total bot interactions, expressed as a percentage. This metric serves as a key performance indicator for automated customer service effectiveness across different Lines of Business (LOB). The calculation uses nullif to handle cases where total responses might be zero, ensuring robust percentage calculations. The metric is segmented by LOB to enable comparison of chatbot performance across different business units, helping identify which areas have more effective automated customer interactions and where improvements may be needed.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied

--- specific filters
--- no specific filters applied

--- calculation_logic
100 * SUM(bot_positive_response) / NULLIF(SUM(bot_total_responses), 0) AS bot_msat_percentage,
lob AS line_of_business




## Bot Passthrough (%)

Bot Passthrough (%) measures the escalation rate from automated bot interactions to human agents across different lines of business (LOB). This metric calculates what percentage of bot-active tickets required agent intervention, serving as an inverse indicator of bot effectiveness - lower percentages indicate better bot performance. The calculation takes the sum of tickets that bots escalated to agents divided by the total number of bot-active tickets, multiplied by 100 for percentage format. No specific filters are applied, providing a comprehensive view across all LOBs. This metric helps customer service teams evaluate chatbot performance, identify areas where bot training may be needed, and optimize the balance between automated and human support to improve operational efficiency and customer satisfaction.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - showing all data

--- specific filters
--- no specific filters applied

--- calculation_logic
100 * SUM(agent_ticket_count_bot) / NULLIF(SUM(bot_active_ticket_count), 0) as bot_passthrough_percentage
GROUP BY lob




## QS_SB Pendency_final_stage_eventtime

This metric tracks the count of merchant help desk cases that are pending at their final resolution stage, categorized by service type and current status. It measures operational efficiency by showing how many cases are stuck in different buckets like callback attempts, service team assignments, courier operations, KYC/MCC updates, and merchant dependencies. The complex categorization logic groups similar statuses into business-meaningful segments to help identify bottlenecks in the merchant support workflow. Cases are filtered by case date to show pendency within a specific time period, enabling teams to monitor resolution progress and allocate resources effectively across different service categories.

-- tables_involved
{unknown_table} cases

--- standard filters to be applied unless specifically requested for a different categorical value
--- temporal filter for case analysis period
cases.case_date TEMPORAL_RANGE 'No filter'

--- calculation_logic
count(cases.id) as case_count,
CASE status
  WHEN '129' THEN 'Pending for Callback'
  WHEN '130' THEN 'CallAttempted'
  WHEN '145' THEN 'OTHER ISSUES'
  WHEN '152' THEN 'Parked to Merchant Loan IO team'
  ELSE status
END AS normalized_status,
CASE
  WHEN assign__c IN ('Merchant Setup', 'Gold Investment Plan', 'MHD-Riskops-QR', 'MHD Offline Chargeback cases') 
    THEN 'Merchant Setup/Risk_ops/Chargeback/Gold Investment'
  WHEN status = 'Details pending from Merchant' THEN 'Merchant Dependency'
  WHEN status IN ('Pending with Other Department', 'Responded from Department') 
    THEN 'Pending with other Department'
  WHEN status = 'Re-Open' THEN 'Re-Open'
  WHEN status = 'Merchant Response Received' THEN 'Merchant Response Received'
  WHEN status = 'Pending for Resolution' AND issue_L1 IN ('Payout & Settlement', 'Merchant Profile') AND assign__c = 'Confirmation Pending'
    THEN 'DIY'
  WHEN status = 'Pending for Resolution' AND issue_L1 = 'Business Loan' AND assign__c = 'Confirmation Pending'
    THEN 'Pending for Loan Disbursement'
  WHEN assign__c = 'P2P - Assigned to Retention' AND fsm_status__c IS NULL
    THEN 'Assign to retention'
  WHEN status IN ('Callback 1st Attempt Done', 'Callback 2nd Attempt Done', 'Callback 3rd Attempt Done', 'CallAttempted', 'Pending for Callback', 'Merchant Uncontactable', 'Language Barrier', 'Callback Required', 'Callback needed post getting exact solution', 'Bank Account Change - Details Pending')
    THEN CASE WHEN fsm_status__c IS NULL OR fsm_status__c IN ('Resolved by Service Agent', 'Assigned to Service Agent', 'OTHER ISSUES', 'Pending with Service Team', 'Pending with Courier Team') THEN 'Call Back Cases' WHEN fsm_status__c = 'Merchant Uncontactable' THEN 'NSTP Calling' ELSE 'Call Back Cases' END
  WHEN status = 'Pending With Agent' AND issue_L3 = 'Paytm handle disabled_FSE visit required'
    THEN 'KYC Update'
  WHEN service_request_type__c = 'KYC Update' AND status IN ('Pending with Service Team', 'Assigned to Service Agent', '145', 'Pending for Self-ship', 'Pending with Courier Team')
    THEN 'KYC Update'
  WHEN service_request_type__c = 'MCC Update' AND status IN ('Pending with Service Team', 'Assigned to Service Agent', '145', 'Pending for Self-ship', 'Pending with Courier Team')
    THEN 'MCC Update'
  WHEN status IN ('Assigned to Service Agent', '145', 'Pending with Service Team') AND fsm_status__c IN ('OTHER ISSUES', 'Assigned to Service Agent', 'Merchant Uncontactable', 'Pending with Service Team', 'Resolved by Service Agent', 'Pending for Self-ship', 'Pending with Courier Team')
    THEN 'Pending with Service'
  WHEN status IN ('Pickup Done by Courier', 'Reverse Pickup Under Process', 'New Soundbox mapped & shipped', 'Pending with Courier Team') AND fsm_status__c IN ('Pending with Courier Team', 'Pending for Self-ship', 'Resolved by Service Agent', 'Merchant Uncontactable', 'Pending with Service Team', 'Assigned to Service Agent')
    THEN 'Pending with Courier'
END AS business_category




## Bot Passthrough (%)

Bot Passthrough percentage measures the efficiency of automated customer service by calculating what percentage of bot-active tickets ultimately required human agent intervention. This metric helps evaluate bot performance and identify areas where automation can be improved. The calculation divides agent-handled bot tickets by total bot-active tickets, multiplied by 100 for percentage format. Results are segmented by line of business (LOB) to enable performance comparison across different service categories. Lower percentages indicate better bot performance as fewer tickets required escalation to human agents.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied

--- specific filters
--- no specific filters applied

--- calculation_logic
100*SUM(agent_ticket_count_bot)/NULLIF(SUM(bot_active_ticket_count),0) as bot_passthrough_pct,
GROUP BY lob




## IVR Calls Count

This metric tracks the total volume of IVR (Interactive Voice Response) calls segmented by line of business (lob) to understand call distribution across different business units in the care operations. It provides visibility into which business lines generate the most IVR activity, helping with resource allocation and capacity planning for automated call handling systems. The metric represents raw call volume without any time-based or categorical filters, giving a comprehensive view of IVR usage patterns across the organization's various service lines for operational planning and performance monitoring purposes.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied

--- specific filters  
--- no specific filters applied

--- calculation_logic
sum(ivr_calls) as total_ivr_calls
group by lob




## Ticket Count (MHD+Service)

This metric tracks the total volume of support tickets across different Lines of Business, combining both MHD and Service ticket categories. It provides a high-level view of ticket distribution across business units to help identify which LOBs generate the most support requests. The aggregation sums pre-calculated ticket counts from a combined dataset, enabling stakeholders to understand support workload allocation and resource planning needs across different business segments. This is an unfiltered view showing all LOBs and their respective ticket volumes.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - shows all LOBs and ticket types

--- specific filters
--- no specific filters applied - comprehensive view across all categories

--- calculation_logic
sum(virtual_table.total_ticket_count) as ticket_count
group by virtual_table.lob




## Ticket Count (MHD+Service)

This metric tracks the total volume of customer service tickets across different lines of business, combining both MHD and general service ticket categories. It provides a high-level summary of ticket volumes by aggregating pre-calculated ticket counts from the combined data source. The metric serves as a primary KPI for understanding overall customer service workload distribution across business segments, helping teams identify which lines of business generate the most support requests. No filters are applied, giving a complete view of all ticket activity in the system for operational planning and resource allocation decisions.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd cd

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - shows all ticket data

--- specific filters
--- no specific filters applied - aggregates all available data

--- calculation_logic
sum(cd.total_ticket_count) grouped by cd.lob




## IVR Calls Count

This metric tracks the total count of Interactive Voice Response (IVR) calls segmented by line of business (lob) within the Care Dashboard for operational monitoring. It measures customer service call volume through automated phone systems, providing insights into service demand distribution across different business units. The metric aggregates all IVR call interactions without any temporal or categorical filters, representing comprehensive call volume data. This information supports resource allocation decisions, capacity planning, and understanding customer engagement patterns across various business lines in the organization's customer care operations.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - shows all IVR calls across all time periods and categories

--- specific filters
--- no specific filters applied - comprehensive view of all IVR calls

--- calculation_logic
sum(virtual_table.ivr_calls) as total_ivr_calls,
grouped by virtual_table.lob




## Ticket Count (MHD Agent)

This metric tracks the total number of support tickets handled by agents within the MHD (customer service) system, segmented by line of business (LOB). It measures operational workload and support volume across different business units, helping managers understand ticket distribution and resource allocation needs. The metric aggregates all agent-handled tickets without date or status filters, providing a comprehensive view of support activity. This is typically used for capacity planning, performance monitoring, and identifying which business lines generate the most support requests requiring agent intervention.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - shows all ticket data across all time periods and statuses

--- specific filters
--- no specific filters applied - comprehensive view across all LOBs

--- calculation_logic
sum(agent_ticket_count) as total_tickets,
grouped by lob (line of business)




## Ticket Count (MHD Agent)

This metric tracks the total number of tickets handled by MHD (Medical Help Desk) agents, segmented by Line of Business (LOB). It serves as a key operational indicator for care teams to monitor ticket volume distribution across different business units and assess agent workload allocation. The metric aggregates agent ticket counts without any date or status filters, providing a comprehensive view of overall ticket handling activity. This helps management understand which LOBs generate the most support requests and enables resource planning and performance evaluation across different business segments within the care operations framework.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd AS virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - showing all ticket data across all LOBs

--- specific filters
--- no specific filters applied - comprehensive view across all business lines

--- calculation_logic
sum(agent_ticket_count) AS ticket_count,
lob AS line_of_business




## Ticket Count (Service)

This metric tracks the total volume of service tickets across different lines of business (lob) within the Care Dashboard for MHD operations. It provides a high-level overview of service request distribution by aggregating all service ticket counts from the combined data source. The metric helps identify which lines of business generate the most service volume, enabling resource allocation and capacity planning decisions. With no filters applied, it represents the complete picture of service ticket activity across all business segments, making it useful for executive reporting and operational oversight of customer service operations.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - shows all service tickets across all lines of business

--- specific filters
--- no specific filters applied - comprehensive view of all service ticket activity

--- calculation_logic
sum(service_ticket_count) as total_tickets
group by lob




## MSAT(%) Agent

Agent MSAT (Mean Satisfaction) Percentage measures customer satisfaction with agent performance across different Lines of Business. This metric calculates the percentage of agent tickets that received satisfactory ratings by dividing the count of satisfied agent tickets by the total feedback received, multiplied by 100. The analysis excludes Retail Mid-Market, Enterprise, and Government LOBs to focus on core business segments. The metric helps evaluate agent performance quality and customer service effectiveness across business lines, providing insights into service delivery standards and areas requiring improvement.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd cd

--- standard filters to be applied unless specifically requested for a different categorical value
--- exclude enterprise and government segments to focus on core business lines
cd.lob NOT IN ('06. RETAIL MID-MARKET', '07. ENTERPRISE', '08. GOVERNMENT')

--- calculation_logic
100 * SUM(cd.agent_tickets_msat_received) / NULLIF(SUM(cd.agent_tickets_feedback_received), 0) as msat_percentage




## Ticket Count (Service)

This metric tracks the total volume of service tickets aggregated by line of business (LOB) within the MHD care operations. It provides visibility into service demand distribution across different business segments, enabling care teams to understand workload allocation, identify high-volume LOBs requiring additional support resources, and monitor service ticket patterns for operational planning. The metric sums all service tickets without any temporal or categorical filters, giving a comprehensive view of total service volume by business line. This helps care managers assess service load distribution and make informed decisions about resource allocation and capacity planning across different lines of business.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - shows all service tickets

--- specific filters
--- no specific filters applied - comprehensive view across all LOBs

--- calculation_logic
sum(service_ticket_count) as total_service_tickets,
grouped by lob (line of business)




## MSAT(%) Agent

This metric tracks agent satisfaction percentage (MSAT) across different lines of business, measuring the ratio of satisfied agent interactions to total feedback received. It serves as a quality indicator for customer service performance, calculating what percentage of agent-handled tickets resulted in positive satisfaction feedback. The metric excludes retail mid-market, enterprise, and government LOBs to focus on core business segments. This helps management assess agent effectiveness and customer satisfaction levels across various business lines, enabling targeted improvements in service quality and agent training programs.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- exclude specific enterprise and government segments to focus on core business lines
virtual_table.lob NOT IN ('06. RETAIL MID-MARKET', '07. ENTERPRISE', '08. GOVERNMENT')

--- calculation_logic
100 * SUM(agent_tickets_msat_received) / NULLIF(SUM(agent_tickets_feedback_received), 0) AS msat_percentage




## MSAT (%) (MHD+Service)

MSAT (Merchant Satisfaction) percentage measures customer satisfaction for MHD (Merchant Help Desk) and Service operations by calculating the ratio of tickets receiving positive satisfaction responses to total tickets receiving any feedback response. This metric is segmented by Line of Business to analyze satisfaction performance across different business segments. The calculation excludes retail mid-market, enterprise, and government LOBs to focus on core merchant segments. The percentage helps identify which business lines deliver superior customer service experiences and where satisfaction improvement initiatives should be prioritized for maximum impact on merchant retention and relationship quality.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd AS virtual_table

--- standard filters to exclude non-core merchant segments
--- exclude enterprise and government segments to focus on core merchant business
virtual_table.lob NOT IN ('06. RETAIL MID-MARKET', '07. ENTERPRISE', '08. GOVERNMENT')

--- calculation_logic
100 * SUM(total_tickets_msat_received) / NULLIF(SUM(total_tickets_feedback_received), 0) AS msat_percentage,
GROUP BY lob




## MSAT (%) (MHD+Service)

This metric tracks the Monthly Service Assurance Team (MSAT) satisfaction percentage for customer service operations, measuring the ratio of tickets that received positive MSAT feedback to total tickets that received any feedback. It provides insights into service quality performance across different lines of business. The metric excludes Retail Mid-Market, Enterprise, and Government segments to focus on core business areas. The percentage calculation helps identify service quality trends and areas needing improvement in the customer care function, enabling management to assess service delivery effectiveness and make data-driven decisions for service optimization.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- exclude high-tier business segments to focus on core service areas
virtual_table.lob NOT IN ('06. RETAIL MID-MARKET', '07. ENTERPRISE', '08. GOVERNMENT')

--- calculation_logic
100 * SUM(total_tickets_msat_received) / NULLIF(SUM(total_tickets_feedback_received), 0) as msat_percentage




## MSAT(%) Service

This metric tracks the MSAT (Merchant/Customer Satisfaction) percentage for service tickets across different lines of business within the Care Dashboard. It measures service quality by calculating the percentage of service tickets that received satisfactory feedback, computed as the ratio of MSAT-received tickets to total feedback-received tickets multiplied by 100. The analysis excludes Enterprise, Retail Mid-Market, and Government business segments, focusing on other LOB categories to provide targeted insights into customer satisfaction performance across core business lines for service optimization and quality monitoring.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- exclude enterprise and mid-market segments to focus on core business lines
virtual_table.lob NOT IN ('07. ENTERPRISE', '06. RETAIL MID-MARKET', '08. GOVERNMENT')

--- calculation_logic
100 * SUM(service_tickets_msat_received) / NULLIF(SUM(service_tickets_feedback_received), 0) AS msat_percentage




## MSAT(%) Service

This metric tracks Monthly Satisfaction (MSAT) percentage for service tickets across different lines of business, measuring service quality and customer satisfaction rates. It calculates the percentage of service tickets that received MSAT satisfaction feedback out of the total tickets that received any feedback response. The metric excludes Enterprise, Retail Mid-Market, and Government LOBs to focus on core business segments. This helps service teams monitor satisfaction trends, identify underperforming business lines, and track service quality improvements across different customer segments in the care dashboard.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- exclude specific business segments from analysis
virtual_table.lob NOT IN ('07. ENTERPRISE', '06. RETAIL MID-MARKET', '08. GOVERNMENT')

--- calculation_logic
100 * SUM(service_tickets_msat_received) / NULLIF(SUM(service_tickets_feedback_received), 0) as msat_percentage




## Avg TAT (Days) Human Agent

This metric measures the average turnaround time in days for human agent support ticket resolution, segmented by line of business. It calculates the mean time between ticket creation and resolution by dividing total TAT days by the number of tickets that have TAT denominators. The metric helps evaluate customer service performance and identify which business lines may need process improvements or additional resources. This operational KPI is essential for service level agreement monitoring and customer satisfaction management across different product or service categories within the organization.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - shows all LOBs and time periods

--- specific filters
--- no specific filters applied

--- calculation_logic
sum(sum_tat_days) / nullif(sum(tat_denominatior_tickets), 0) as avg_tat_days
GROUP BY lob




## Avg TAT (Days) Human Agent

This metric measures the average turnaround time in days for human agents to resolve customer service tickets, segmented by line of business. It calculates a weighted average by dividing the total TAT days by the number of tickets with valid TAT measurements, using nullif to prevent division by zero errors. The metric provides insights into agent efficiency and service quality across different business lines, helping identify performance variations and areas needing improvement. No filters are applied, giving a comprehensive view of all LOBs in the care dashboard system.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - shows all data

--- specific filters
--- no specific filters applied - comprehensive view across all LOBs

--- calculation_logic
sum(sum_tat_days) / nullif(sum(tat_denominatior_tickets), 0) as avg_tat_days,
group by lob




## Unique Merchant Count - Bot

This metric tracks unique merchant counts for bot interactions within the care support system, measuring both total bot engagements and active session completions. The total bot count includes merchants who initiated bot sessions regardless of completion status (active plus dropoff), while active sessions specifically measures merchants who successfully completed their bot interactions. This enables monitoring of bot effectiveness and merchant engagement patterns, helping identify support automation success rates and potential areas where merchants are dropping off during bot interactions. The weekly aggregation provides trend analysis for bot performance optimization and merchant experience improvement initiatives.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd cd

--- standard filters to be applied unless specifically requested for a different categorical value
--- default temporal range filter (no specific constraints shown)
cd.created_date IS NOT NULL

--- calculation_logic
sum(cd.bot_merchant_count) as total_bot_merchants,
sum(cd.bot_active_merchant_count) as active_bot_sessions,
date_trunc('week', cast(cd.created_date as timestamp)) as week_period




## Top Issue on Bot 

This metric tracks the total volume of active tickets currently being handled by automated bot systems, segmented by issue type categories. It provides visibility into which types of customer service issues are most commonly processed through automated channels, helping teams understand bot workload distribution and identify high-volume issue categories that may benefit from further automation optimization. The metric aggregates all active bot tickets without time or categorical filters, representing the current state of automated ticket processing across the entire customer service ecosystem.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - includes all bot ticket activity

--- specific filters
--- no specific filters applied - represents complete bot ticket distribution

--- calculation_logic
sum(virtual_table.bot_active_ticket_count) as total_bot_tickets
group by virtual_table.issue_mapping




## Unique Merchant Count - Bot

Bot merchant engagement tracking measures the count of unique merchants interacting with automated bot services within the care dashboard system. This metric serves two purposes: monitoring overall bot adoption through total merchant count (including both successful active sessions and dropoff cases) and measuring engagement quality through active session counts specifically. The data is aggregated weekly to identify trends in bot utilization and merchant engagement patterns. This helps the care team understand bot effectiveness, identify potential issues with merchant dropoffs, and optimize automated service delivery for better merchant experience and support efficiency.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different time range
--- temporal filter allows flexible date range selection for trend analysis
virtual_table.created_date (temporal range filter available)

--- calculation_logic
sum(virtual_table.bot_merchant_count) as total_bot_merchants,
sum(virtual_table.bot_active_merchant_count) as active_bot_sessions,
date_trunc('week', CAST(virtual_table.created_date AS TIMESTAMP)) as week_grouping




## Agent Ticket Count - Bot (MHD & Service)

This metric tracks customer support ticket volumes segmented by handling channel within the Care Dashboard for MHD operations. It measures two distinct support flows: tickets handled by MHD (Mental Health Department) agents and tickets that escalated from bot interactions to human service representatives. The data is aggregated weekly to show trends in support workload distribution and bot-to-human escalation patterns. This helps operations teams understand channel effectiveness, identify periods of high escalation, and optimize support resource allocation between automated and human channels. The temporal filter allows analysis across different time periods to track seasonal patterns and operational efficiency.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different time period
--- temporal filter for analysis period (currently set to show all data)
virtual_table.created_date IS NOT NULL

--- calculation_logic
sum(virtual_table.agent_ticket_count_bot) as mhd_agent_tickets,
sum(virtual_table.bot_to_service_ticket_count) as service_escalation_tickets,
date_trunc('week', CAST(virtual_table.created_date AS TIMESTAMP)) as week_grouping




## Top Issue on Bot 

This metric tracks the total number of active tickets handled by bots across different issue categories to identify the most common issues requiring bot intervention. The analysis groups bot active ticket counts by issue mapping to reveal which specific issues generate the highest bot workload, helping the care team understand bot utilization patterns and identify areas where automated support is most heavily engaged. This information is valuable for optimizing bot capabilities and understanding customer service demand patterns across different issue types without any applied filters, showing comprehensive bot activity data.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - showing all bot active tickets

--- specific filters
--- no specific filters applied - comprehensive view of all issue mappings

--- calculation_logic
sum(bot_active_ticket_count) as total_bot_tickets,
grouped by issue_mapping




## Agent Ticket Count - Bot (MHD & Service)

This metric tracks weekly ticket volumes in the care operations workflow, measuring both tickets handled directly by MHD (Mental Health Department) agents and tickets that escalated from bot interactions to human service agents. The chart aggregates agent_ticket_count_bot as "MHD Agent" workload and bot_to_service_ticket_count as "Service" escalations, providing visibility into care ticket distribution patterns. Results are grouped by week and ordered by MHD agent volume to prioritize mental health support capacity planning. This supports operational decision-making for staffing allocation and bot effectiveness evaluation in the customer care ecosystem.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- temporal range filter for ticket creation analysis
virtual_table.created_date >= {start_date} AND
virtual_table.created_date <= {end_date}

--- specific filters
--- no additional categorical filters applied

--- calculation_logic
sum(virtual_table.agent_ticket_count_bot) as mhd_agent_tickets,
sum(virtual_table.bot_to_service_ticket_count) as service_escalation_tickets,
date_trunc('week', cast(virtual_table.created_date as timestamp)) as week_grouping




## Unique Merchant Counts - Bot (MHD & Service)

This metric tracks the weekly count of unique merchants who engage with customer support through two distinct bot-driven channels: MHD Agent (merchant help desk agent interactions) and Service (bot-to-service escalations). The purpose is to monitor merchant engagement patterns across different support touchpoints and understand the distribution of merchant queries between automated agent assistance and service escalations. Data is aggregated by week to show trends in merchant support utilization, helping identify peak periods and channel preferences. The metric helps support teams optimize resource allocation and understand merchant behavior in seeking assistance through bot-enabled support channels.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- temporal filter for date range selection (configurable)
date_trunc('week', CAST(virtual_table.created_date AS TIMESTAMP))

--- calculation_logic
sum(virtual_table.agent_ticket_merchant_count_bot) as mhd_agent_count,
sum(virtual_table.bot_to_service_ticket_merchant_count) as service_count




## Unique Merchant Counts - Bot (MHD & Service)

This metric tracks unique merchant engagement with MHD support channels by counting distinct merchants who created tickets through bot automation versus human service escalation paths. The MHD Agent metric represents merchants whose tickets were handled entirely by the automated bot system, while the Service metric captures merchants whose tickets required escalation from bot to human agents. Data is aggregated weekly to show merchant support engagement patterns and channel effectiveness. This helps understand merchant support needs distribution between automated and human-assisted resolution paths, enabling resource planning and bot optimization decisions based on actual merchant usage patterns across the support ecosystem.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- temporal range filter allows flexible date selection
virtual_table.created_date >= {start_date} AND
virtual_table.created_date <= {end_date}

--- calculation_logic
sum(virtual_table.agent_ticket_merchant_count_bot) as mhd_agent_merchants,
sum(virtual_table.bot_to_service_ticket_merchant_count) as service_escalation_merchants,
date_trunc('week', cast(virtual_table.created_date as timestamp)) as week_period




## Bot Passthrough % (MHD & Service)

Bot Passthrough Percentage tracks the escalation rates from automated bot interactions to human support channels in the MHD customer care system. This metric measures operational efficiency by showing what percentage of bot-handled tickets require human intervention, segmented into two escalation paths: MHD Agent (direct agent escalation) and Service (service team escalation). The percentages are calculated weekly to identify trends in bot effectiveness and support load distribution. Higher passthrough rates may indicate bot limitations or complex customer issues requiring human expertise, while lower rates suggest effective bot resolution capabilities.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- temporal range filter for data analysis period
created_date (temporal range - no specific constraints)

--- specific filters
--- no additional specific filters applied

--- calculation_logic
MHD Agent: 100 * SUM(agent_ticket_count_bot) / NULLIF(SUM(bot_active_ticket_count), 0)
Service: 100 * SUM(bot_to_service_ticket_count) / NULLIF(SUM(bot_active_ticket_count), 0)
GROUP BY: date_trunc('week', CAST(created_date AS TIMESTAMP))




## Bot Passthrough % (MHD & Service)

Bot Passthrough % (MHD & Service) measures the distribution of bot-initiated support tickets between MHD agents and service teams as percentages of total active bot tickets. This metric helps evaluate the effectiveness of bot triage and routing decisions in the care system. The MHD Agent percentage shows tickets successfully handled by mental health specialists, while Service percentage represents tickets requiring broader service team intervention. Data is aggregated weekly to track routing patterns over time, enabling optimization of bot escalation logic and resource allocation between specialized MHD support and general service teams.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- temporal filter for ticket creation date (configurable range)
date_trunc('week', CAST(virtual_table.created_date AS TIMESTAMP))

--- calculation_logic
100*SUM(virtual_table.agent_ticket_count_bot)/nullif(sum(virtual_table.bot_active_ticket_count),0) as mhd_agent_pct,
100*SUM(virtual_table.bot_to_service_ticket_count)/nullif(sum(virtual_table.bot_active_ticket_count),0) as service_pct




## Feedback % - Bot

Bot Performance Feedback tracks customer service automation effectiveness through two complementary metrics: Response Rate measuring bot engagement (percentage of active tickets receiving bot responses) and MSAT measuring customer satisfaction (percentage of positive feedback among bot responses). These metrics are aggregated weekly to identify trends in bot performance and customer satisfaction over time. The data helps evaluate chatbot effectiveness, identify periods of suboptimal performance, and guide improvements to automated customer service capabilities. Applied with temporal filtering to analyze performance patterns across different time periods.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- temporal range filter for analysis period
virtual_table.created_date >= {start_date} AND virtual_table.created_date <= {end_date}

--- calculation_logic
Response Rate: 100*SUM(bot_total_responses)/NULLIF(SUM(bot_active_ticket_count),0)
MSAT: 100*SUM(bot_positive_response)/NULLIF(SUM(bot_total_responses),0)
Weekly aggregation: date_trunc('week', CAST(created_date AS TIMESTAMP))




## Feedback % (Human Agent)

This metric tracks human agent feedback performance through two key indicators: Response Rate and MSAT (Mean Satisfaction) percentage. Response Rate measures the percentage of tickets that received any feedback response out of total tickets eligible for response, indicating agent responsiveness. MSAT measures the percentage of tickets receiving satisfaction feedback out of all tickets that received feedback, indicating quality measurement coverage. The data is aggregated weekly to show performance trends over time, helping managers monitor both agent response consistency and feedback quality tracking effectiveness. This enables identification of periods with low response rates or gaps in satisfaction measurement collection for performance improvement initiatives.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- temporal range filter on ticket creation date (configurable via dashboard)
date_trunc('week', CAST(virtual_table.created_date AS TIMESTAMP)) IS NOT NULL

--- calculation_logic
100 * SUM(total_tickets_feedback_received) / NULLIF(SUM(total_tickets_for_response), 0) AS response_rate,
100 * SUM(total_tickets_msat_received) / NULLIF(SUM(total_tickets_feedback_received), 0) AS msat_percentage




## Feedback % (Human Agent)

This chart measures customer service performance for human agents by tracking two critical feedback metrics: Response Rate and MSAT (customer satisfaction). Response Rate calculates the percentage of support tickets that received customer feedback out of all tickets eligible for response, indicating customer engagement with the feedback process. MSAT measures the percentage of satisfied customers among those who provided feedback, representing service quality effectiveness. The metrics are aggregated weekly to show trends in both customer response behavior and satisfaction levels. This analysis helps evaluate human agent performance, identify service quality patterns, and monitor customer engagement with the feedback collection process over time.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- temporal filter currently set to no filter (all available dates)
--- note: created_date temporal range can be applied when specific time periods are needed

--- calculation_logic
response_rate: 100*SUM(total_tickets_feedback_received)/NULLIF(SUM(total_tickets_for_response),0)
msat: 100 * SUM(total_tickets_msat_received) / NULLIF(SUM(total_tickets_feedback_received), 0)
aggregation: GROUP BY date_trunc('week', CAST(created_date AS TIMESTAMP))




## Feedback % - Bot

Bot Performance Feedback tracks customer service automation effectiveness for mental health support tickets through two key satisfaction metrics. Response Rate measures the percentage of active tickets that received automated bot responses, calculated as total bot responses divided by active ticket count. MSAT (Mean Satisfaction) represents the percentage of positive feedback among all bot responses received. The metrics are aggregated weekly and filtered by configurable date ranges to analyze bot performance trends over time. This enables care teams to monitor automated response coverage and customer satisfaction with bot interactions, helping optimize the balance between automated and human support in mental health services.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different time period
--- temporal filter for analysis period selection
date_trunc('week', CAST(created_date AS TIMESTAMP))

--- specific filters
--- configurable date range filter
created_date IN ({date_range}: temporal_range_selection)

--- calculation_logic
Response Rate: 100*SUM(bot_total_responses)/nullif(sum(bot_active_ticket_count),0)
MSAT: 100*SUM(bot_positive_response)/nullif(SUM(bot_total_responses),0)
GROUP BY date_trunc('week', CAST(created_date AS TIMESTAMP))




## Feedback % - MHD Agent 

This metric tracks MHD agent customer service performance through two key indicators: Response Rate measuring the percentage of agent tickets that received customer feedback out of total tickets requiring response, and MSAT (satisfaction) measuring the percentage of tickets receiving satisfactory ratings out of those with feedback received. The data is aggregated weekly to identify performance trends and patterns over time. This enables care team managers to monitor agent responsiveness and customer satisfaction levels, helping identify training needs and performance improvement opportunities. The temporal filter allows analysis across different time periods to assess performance consistency and seasonal variations.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different date range
--- temporal filter for performance analysis period
created_date TEMPORAL_RANGE (configurable date range)

--- calculation_logic
Response Rate: 100 * SUM(agent_tickets_feedback_received) / NULLIF(SUM(agent_tickets_for_response), 0)
MSAT: 100 * SUM(agent_tickets_msat_received) / NULLIF(SUM(agent_tickets_feedback_received), 0)
GROUP BY: date_trunc('week', CAST(created_date AS TIMESTAMP))




## Feedback % - MHD Agent 

This metric tracks customer service performance for MHD (Mental Health Department) agents through two key indicators: Response Rate measuring the percentage of agent tickets that received customer feedback out of those requiring responses, and MSAT measuring the percentage of satisfied customers among those who provided feedback. The data is aggregated weekly to identify trends in customer engagement and satisfaction levels. This dual-metric approach provides insights into both the effectiveness of feedback collection processes and actual customer satisfaction outcomes, enabling performance monitoring and improvement initiatives for mental health customer service operations.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- temporal range filter for analysis period selection
date_trunc('week', CAST(created_date AS TIMESTAMP)) >= {start_date} AND
date_trunc('week', CAST(created_date AS TIMESTAMP)) <= {end_date}

--- calculation_logic
100 * SUM(agent_tickets_feedback_received) / NULLIF(SUM(agent_tickets_for_response), 0) as response_rate,
100 * SUM(agent_tickets_msat_received) / NULLIF(SUM(agent_tickets_feedback_received), 0) as msat_rate,
GROUP BY date_trunc('week', CAST(created_date AS TIMESTAMP))




## Feedback % - Service

This metric tracks service feedback performance through two key indicators: Response Rate measuring the percentage of service tickets that received customer feedback out of those requiring a response, and MSAT (Mean Satisfaction) measuring the percentage of tickets receiving satisfaction feedback out of those that received any feedback. The metrics are calculated weekly and help monitor customer engagement and satisfaction trends in the Care Dashboard for MHD operations. Both calculations use NULLIF protection to handle division by zero scenarios and are presented as percentages for easy interpretation by service teams.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- temporal filter available but currently set to no filter (all dates included)
--- can be filtered by created_date for specific time periods

--- calculation_logic
Response Rate: 100 * SUM(service_tickets_feedback_received) / NULLIF(SUM(service_tickets_for_response), 0)
MSAT: 100 * SUM(service_tickets_msat_received) / NULLIF(SUM(service_tickets_feedback_received), 0)
GROUP BY: date_trunc('week', CAST(created_date AS TIMESTAMP))




## Feedback % - Service

This metric tracks service ticket feedback performance through two key indicators: Response Rate measuring the percentage of service tickets that received customer feedback out of all tickets eligible for response, and MSAT (satisfaction rate) measuring the percentage of tickets with positive satisfaction scores among those that provided feedback. The data is aggregated weekly to show trends in customer engagement and satisfaction with service support. This metric helps the care team monitor both the effectiveness of their feedback collection process and the quality of service delivery as perceived by customers. The temporal filter allows analysis across different time periods to identify patterns and improvements in service performance.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- temporal range filter for analysis period selection
date_trunc('week', CAST(virtual_table.created_date AS TIMESTAMP)) IS NOT NULL

--- specific filters
--- no additional specific filters applied - shows all service ticket types and categories

--- calculation_logic
Response Rate: 100 * SUM(service_tickets_feedback_received) / NULLIF(SUM(service_tickets_for_response), 0)
MSAT: 100 * SUM(service_tickets_msat_received) / NULLIF(SUM(service_tickets_feedback_received), 0)




## Avg TAT (Days) - Human Agent

This metric tracks the average turnaround time in days for tickets handled by human agents in the customer care system. It measures operational efficiency by calculating the mean resolution time across all qualifying support tickets. The calculation uses sum_tat_days (total days across all tickets) divided by tat_denominator_tickets (count of tickets with valid TAT calculations) to provide an accurate average that excludes incomplete or invalid cases. The metric is aggregated weekly to identify performance trends and patterns in agent response times. A temporal filter enables analysis across different time periods to monitor service level improvements or deterioration over time.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- temporal range filter for flexible date analysis
virtual_table.created_date [temporal_range filter applied]

--- specific filters
--- no additional specific filters applied

--- calculation_logic
sum(virtual_table.sum_tat_days) / nullif(sum(virtual_table.tat_denominatior_tickets), 0)




## Avg TAT (Days) - Human Agent

This metric tracks the average Turn Around Time (TAT) in days for tickets handled by human agents in the mental health department. It calculates a weighted average by dividing the total TAT days by the number of tickets that have TAT measurements, providing insight into agent efficiency and customer service response times. The metric is aggregated weekly to show trends in resolution speed over time. A temporal range filter on created_date allows analysis of specific time periods. This KPI helps management monitor service quality, identify performance bottlenecks, and ensure customer inquiries are resolved within acceptable timeframes.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- temporal range filter for analyzing specific time periods
virtual_table.created_date >= {start_date} AND
virtual_table.created_date <= {end_date}

--- specific filters
--- none specified - uses default temporal range

--- calculation_logic
sum(sum_tat_days) / nullif(SUM(tat_denominatior_tickets), 0) as avg_tat_days,
date_trunc('week', CAST(created_date AS TIMESTAMP)) as week_period




## Avg TAT (Days) - MHD Agent

This metric measures the average turnaround time in days for MHD (Mental Health Department) agents to resolve tickets. It calculates a weighted average by dividing the total sum of TAT days across all tickets by the count of tickets that have valid TAT calculations, providing insight into agent efficiency and service quality. The data is aggregated weekly using date truncation to show trends over time, helping management monitor performance patterns and identify periods requiring attention. The metric uses nullif protection to handle cases where no tickets have TAT calculations, ensuring mathematical accuracy in the calculation.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different time period
--- temporal filter on ticket creation date (default range applied)
date_trunc('week', CAST(virtual_table.created_date AS TIMESTAMP)) IS NOT NULL

--- calculation_logic
sum(virtual_table.sum_mhd_tat_days) / nullif(SUM(virtual_table.mhd_tat_denominatior_tickets), 0) as avg_tat_days,
date_trunc('week', CAST(virtual_table.created_date AS TIMESTAMP)) as week_period




## Avg TAT (Days) - MHD Agent

This metric tracks the average turnaround time in days for MHD (Medical Health Department) agents handling customer service tickets. It measures operational efficiency by calculating a weighted average of resolution times across all tickets within specified time periods. The metric uses sum of TAT days divided by the count of tickets to provide an accurate average that accounts for ticket volume. Data is typically grouped by week to show temporal trends in agent performance. This helps management monitor service quality, identify performance bottlenecks, and ensure compliance with service level agreements in healthcare support operations.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- temporal range filter on ticket creation date (configurable)
virtual_table.created_date >= {start_date} AND virtual_table.created_date <= {end_date}

--- calculation_logic
sum(sum_mhd_tat_days) / nullif(sum(mhd_tat_denominatior_tickets), 0) as avg_tat_days




## Avg TAT - Service Agent

This metric tracks the average turnaround time (TAT) in days for service agent ticket resolution within the care dashboard operations. It measures operational efficiency by calculating the weighted average of service resolution times, dividing total service TAT days by the number of tickets that contribute to the denominator. The metric is aggregated weekly to show trends in service performance over time. It includes null protection to handle cases where no qualifying tickets exist for a time period. This KPI helps management monitor service quality, identify performance bottlenecks, and assess whether service level agreements are being met across the customer care operations.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- temporal range filter on ticket creation date (default: no filter, shows all available data)
virtual_table.created_date IS NOT NULL

--- calculation_logic
sum(virtual_table.sum_service_tat_days) / nullif(sum(virtual_table.service_tat_denominatior_tickets), 0) as avg_service_tat_days




## Avg TAT - Service Agent

This metric measures the average turnaround time in days for service agents handling tickets in the MHD care system. The calculation uses a weighted average approach, dividing the sum of service TAT days by the total count of tickets that have TAT denominators (excluding null values to prevent division errors). The metric is grouped by week to show trending patterns in service response times. This helps track service agent performance and identify periods where response times may be deteriorating, enabling proactive management interventions to maintain service quality standards.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- temporal filter for created date (default range applied)
date_trunc('week', CAST(virtual_table.created_date AS TIMESTAMP)) IS NOT NULL

--- calculation_logic
sum(virtual_table.sum_service_tat_days) / nullif(SUM(virtual_table.service_tat_denominatior_tickets), 0) as avg_tat_days




## Top L1 Issues - Human Agent

This metric tracks the total volume of Level 1 support tickets handled by human agents, segmented by issue type categories. It measures the distribution of customer service workload across different problem areas to help identify the most common issues requiring human intervention. The aggregation sums all ticket counts by issue mapping categories, providing visibility into support volume patterns and helping prioritize resource allocation for human agents. This data supports operational decisions around staffing, training focus areas, and potential automation opportunities for frequently occurring L1 issues.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - shows all L1 issues handled by human agents

--- specific filters
--- no specific filters applied - comprehensive view of all issue types

--- calculation_logic
sum(virtual_table.total_ticket_count) as total_tickets,
virtual_table.issue_mapping as issue_category




## Top L1 Issues - Human Agent

This metric tracks the total volume of L1 support tickets handled by human agents, segmented by issue type mapping categories. It provides operational visibility into the distribution of customer care workload across different issue categories within the MHD (Mental Health Department) services. The metric aggregates all ticket counts without any temporal or categorical filters, giving a comprehensive view of issue volume patterns. This helps care teams identify the most common L1 issues requiring human agent intervention, enabling better resource allocation and process optimization for customer support operations.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - shows all L1 issues across all categories

--- specific filters
--- no specific filters applied - comprehensive view of all ticket volumes

--- calculation_logic
sum(virtual_table.total_ticket_count) as ticket_volume,
virtual_table.issue_mapping as issue_category




## Ticket Counts - Bot

This metric tracks bot interaction volume within the mental health department's customer care system. It measures two key aspects of bot engagement: total bot tickets (including both completed active sessions and user drop-offs) and specifically active bot sessions where users remained engaged. The data is aggregated weekly to identify trends in automated support utilization and user engagement patterns. This helps assess bot effectiveness by comparing total interactions against successful active sessions, providing insights into user behavior and bot performance for mental health support services.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- temporal filter available but currently set to no filter
--- can be applied to created_date for specific time periods

--- specific filters
--- no additional filters currently applied

--- calculation_logic
sum(virtual_table.bot_ticket_count) as total_bot_tickets,
sum(virtual_table.bot_active_ticket_count) as active_bot_sessions,
date_trunc('week', CAST(virtual_table.created_date AS TIMESTAMP)) as week_period




## Ticket Counts - Bot

This metric tracks bot interaction volume in the customer care system, measuring both total bot tickets (including active sessions and drop-offs) and specifically active bot sessions. The chart aggregates data weekly to show trends in bot engagement over time, helping monitor the effectiveness of automated customer support. Total bot tickets represent all interactions initiated with the bot system, while active sessions indicate successful ongoing engagements. The data includes all available time periods with no specific date filtering applied, providing a comprehensive view of bot performance trends for operational monitoring and capacity planning purposes.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- temporal range filter set to include all available data
virtual_table.created_date IS NOT NULL

--- specific filters
--- no additional filters applied - chart shows all bot ticket data

--- calculation_logic
sum(virtual_table.bot_ticket_count) as total_bot_tickets,
sum(virtual_table.bot_active_ticket_count) as active_bot_sessions,
date_trunc('week', cast(virtual_table.created_date as timestamp)) as week_period




## Bot Contact Ratio (%)

Bot Contact Ratio measures the percentage of customer service tickets handled by automated bots relative to the total contact base, segmented by line of business (lob). This operational efficiency metric helps evaluate the effectiveness of automation in customer care operations across different business segments. The ratio is calculated as (bot ticket count / contact ratio base count) * 100, providing insights into how well bot automation is performing in each business line. Higher ratios indicate greater automation success, which typically correlates with reduced operational costs and improved response times for routine customer inquiries.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- temporal filter on ticket creation date (currently set to no filter, may use dashboard-level filtering)
virtual_table.created_date {temporal_range_filter}

--- specific filters
--- none specified for this metric

--- calculation_logic
100 * SUM(bot_ticket_count) / NULLIF(MAX(cr_base_count), 0) AS bot_contact_ratio_pct
GROUP BY lob




## Bot Contact Ratio (%)

Bot Contact Ratio measures the percentage of customer support tickets handled by automated bots versus total contact volume, segmented by line of business (lob). This metric helps assess the effectiveness of automation in customer care operations and identifies which business lines have higher bot resolution rates. The calculation divides total bot ticket counts by the maximum contact ratio base count and multiplies by 100 to get a percentage. It provides insights into automation adoption and efficiency across different service areas, enabling teams to optimize bot deployment and improve self-service capabilities while reducing manual support workload.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd cd

--- standard filters to be applied unless specifically requested for a different categorical value
--- temporal filter on ticket creation date (default range applied)
cd.created_date >= {default_start_date} AND
cd.created_date <= {default_end_date}

--- specific filters
--- no additional specific filters applied

--- calculation_logic
100 * SUM(cd.bot_ticket_count) / NULLIF(MAX(cd.cr_base_count), 0) AS bot_contact_ratio_pct




## Total Volume (IVR Calls+Bot Tickets)

This metric tracks total customer service interaction volume by combining automated bot tickets and IVR calls across different lines of business. It provides a comprehensive view of customer support demand by aggregating two primary self-service channels, enabling teams to understand overall service volume distribution across business units. The metric helps in capacity planning, resource allocation, and identifying which LOBs generate the highest customer service demand. By combining both digital (bot) and voice (IVR) interactions, it offers a holistic perspective on customer service utilization patterns for operational and strategic decision-making.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - shows all LOBs

--- specific filters
--- no specific filters applied - includes all available data

--- calculation_logic
sum(bot_ticket_count) + sum(ivr_calls) as total_volume,
grouped by lob




## Total Volume (IVR Calls+Bot Tickets)

This metric tracks the total customer service volume by combining bot-generated support tickets and inbound IVR (Interactive Voice Response) calls, segmented by line of business. It provides a comprehensive view of customer service demand across different business units, helping operations teams understand service load distribution and capacity planning needs. The metric aggregates two primary customer service channels to give a holistic picture of support volume, enabling cross-LOB comparisons and resource allocation decisions for the care team.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - includes all LOBs and time periods

--- specific filters
--- no specific filters applied

--- calculation_logic
sum(bot_ticket_count) + sum(ivr_calls) as total_volume,
group by lob




## Contact Ratio (%)

Contact Ratio tracks the percentage of customers who actively reach out for support through digital channels (bot tickets) and voice channels (IVR calls) relative to the total eligible customer base. This metric helps the Care team understand customer engagement patterns and support utilization rates across different Lines of Business (LOB). The calculation combines both automated bot interactions and traditional phone-based inquiries to provide a comprehensive view of customer contact behavior. By segmenting results by LOB, the dashboard enables comparison of support engagement levels across various business units, helping identify which areas generate higher customer contact volumes and may require additional support resources or process improvements.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - metric calculated across all available data

--- specific filters
--- no specific filters applied - comprehensive view across all LOBs

--- calculation_logic
100 * (SUM(bot_ticket_count) + SUM(ivr_calls)) / NULLIF(MAX(cr_base_count), 0) AS contact_ratio_percent




## Contact Ratio (%)

Contact Ratio measures the percentage of customer service interactions (bot tickets and IVR calls combined) relative to the baseline contact count, segmented by Line of Business. This metric helps customer service teams understand interaction volume patterns across different business units and assess the proportion of automated versus total potential contacts. The ratio is calculated as a percentage using combined bot ticket count and IVR calls divided by the maximum baseline contact count, with null handling to prevent division errors. This provides insights into customer engagement patterns and service channel utilization across different LOBs for operational planning and resource allocation decisions.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied

--- specific filters
--- no specific filters applied

--- calculation_logic
100 * (SUM(bot_ticket_count) + SUM(ivr_calls)) / NULLIF(MAX(cr_base_count), 0) as contact_ratio_percent,
grouped by lob




## MSAT (%)

MSAT (%) measures overall customer satisfaction percentage across both automated bot interactions and manual ticket handling channels. The metric combines positive bot responses and satisfied manual tickets as the numerator, divided by total feedback received from both channels, then multiplied by 100 for percentage representation. This composite satisfaction score provides a unified view of customer experience quality across different service delivery methods, segmented by line of business. The calculation handles cases where no feedback is received by using NULLIF to prevent division by zero errors, ensuring robust metric computation across all business segments.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - shows satisfaction across all lines of business

--- specific filters
--- no specific filters applied

--- calculation_logic
(SUM(bot_positive_response) + SUM(total_tickets_msat_received)) / NULLIF((SUM(bot_total_responses) + SUM(total_tickets_feedback_received)), 0) * 100
grouped by: lob




## MSAT (%)

MSAT percentage measures overall customer satisfaction across both bot interactions and human agent tickets, segmented by Line of Business. The metric combines bot positive responses and tickets receiving positive MSAT feedback as the numerator, divided by total bot responses and total tickets with feedback received. This provides a comprehensive satisfaction score that accounts for both automated and human customer service channels. The calculation uses nullif to handle division by zero cases and multiplies by 100 to express results as percentages. Results are grouped by LOB to enable business line comparison and identify areas needing satisfaction improvement across the customer care ecosystem.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - shows all data across all LOBs

--- specific filters
--- no specific filters applied

--- calculation_logic
100*((SUM(bot_positive_response)+SUM(total_tickets_msat_received)))/nullif((SUM(bot_total_responses)+SUM(total_tickets_feedback_received)),0)
grouped by: lob




## IVR Contact Ratio (%)

IVR Contact Ratio measures the percentage of customers who use Interactive Voice Response (IVR) systems relative to the total contact base for each line of business. This metric helps evaluate the adoption and utilization of automated voice services across different business segments. The calculation divides total IVR calls by the maximum contact ratio base count to determine penetration rates. It includes safeguards against division by zero through nullif function and presents results as percentages for easy interpretation. The metric is segmented by line of business to enable comparative analysis of IVR usage patterns across different service areas.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd cd

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - shows all lines of business

--- specific filters
--- no specific filters applied

--- calculation_logic
100 * sum(cd.ivr_calls) / nullif(max(cd.cr_base_count), 0) as ivr_contact_ratio_pct
group by cd.lob




## IVR Contact Ratio (%)

The IVR Contact Ratio measures the percentage of customer interactions that utilize Interactive Voice Response (IVR) systems relative to the total contact base count across different lines of business. This metric helps assess channel preference and IVR system utilization effectiveness for customer service operations. The ratio is calculated as total IVR calls divided by the maximum contact ratio base count, multiplied by 100 to express as a percentage. Results are segmented by line of business to enable comparative analysis across different business units and identify which LOBs have higher IVR adoption rates, supporting strategic decisions about customer service channel optimization and resource allocation.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd cd

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - shows all available data

--- specific filters
--- no specific filters applied - includes all lines of business

--- calculation_logic
100 * sum(cd.ivr_calls) / nullif(max(cd.cr_base_count), 0) as ivr_contact_ratio_pct




## Avg TAT (Days) Service Agent

This metric measures the average turnaround time in days for service agents to resolve customer service requests, segmented by line of business (LOB). It calculates a weighted average by dividing the total service TAT days by the count of tickets that have valid TAT measurements, ensuring accurate performance assessment across different business units. The metric helps identify performance variations between LOBs and enables targeted improvements in service delivery. It uses nullif protection to handle cases where no tickets exist for TAT calculation, providing a reliable measure of agent efficiency and customer service quality across the organization's different business segments.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - shows all LOBs

--- specific filters
--- no specific filters applied

--- calculation_logic
sum(sum_service_tat_days) / nullif(sum(service_tat_denominatior_tickets), 0) as avg_tat_days
group by lob




## Avg TAT (Days) Service Agent

This metric measures the average turnaround time in days for service agents handling customer requests across different lines of business. It calculates a weighted average by dividing the total service TAT days by the number of tickets that have TAT data, using nullif to handle zero denominators. The metric is segmented by line of business (lob) to enable performance comparison across different business units. This operational efficiency indicator helps identify service delivery bottlenecks and track agent performance improvements over time. The measurement provides insights into customer service quality and helps management optimize resource allocation and process improvements across various business segments.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - shows all available service data

--- specific filters
--- no specific filters applied - comprehensive view across all records

--- calculation_logic
sum(sum_service_tat_days) / nullif(sum(service_tat_denominatior_tickets), 0) as avg_tat_days
group by lob




## Bot Contact Ratio (%)

Bot Contact Ratio tracks the percentage of customer care interactions handled by automated bot systems versus total customer contacts. This metric measures digital transformation effectiveness in customer service by showing bot adoption rates and engagement success. The ratio includes both active bot sessions and dropoff scenarios to provide comprehensive bot utilization insights. Data is aggregated monthly to identify trends in automation adoption and customer preference for self-service options. The base count represents total customer contact volume, making this a key performance indicator for care operations efficiency and customer experience optimization.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- temporal filter applied based on user selection
date_trunc('month', CAST(virtual_table.created_date AS TIMESTAMP))

--- calculation_logic
100*SUM(bot_ticket_count)/nullif(max(cr_base_count),0) as bot_total_ratio,
100*SUM(bot_active_ticket_count)/nullif(max(cr_base_count),0) as bot_active_ratio




## Avg TAT (Days) MHD Agent

This metric measures the average turnaround time in days for MHD agent ticket resolution, segmented by line of business (lob). It serves as a key performance indicator for service efficiency, helping identify which business lines experience longer resolution times. The calculation uses a weighted average approach, dividing the total TAT days by the total number of tickets eligible for TAT calculation, ensuring accurate averages even when ticket volumes vary significantly across LOBs. This metric enables service managers to benchmark performance across different business units and prioritize improvement efforts where TAT exceeds acceptable thresholds. No specific filters are applied, providing a comprehensive view of all MHD agent performance across the organization.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - shows all LOBs and time periods

--- specific filters
--- no specific filters applied

--- calculation_logic
sum(sum_mhd_tat_days) / nullif(SUM(mhd_tat_denominatior_tickets), 0) as avg_tat_days
GROUP BY lob




## Avg TAT (Days) MHD Agent

This metric measures the average turnaround time in days for Multi-Helpdesk (MHD) agents across different lines of business. It calculates a weighted average by dividing the total sum of TAT days by the total number of tickets with TAT data, segmented by LOB to enable performance comparison across business units. The metric helps identify service delivery efficiency and potential bottlenecks in customer support operations. It uses NULLIF protection to handle cases where no tickets exist for a particular LOB, ensuring reliable calculations across all business segments.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd mhd

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - shows all LOB performance

--- specific filters
--- no specific filters applied - comprehensive view across all data

--- calculation_logic
sum(mhd.sum_mhd_tat_days) / nullif(sum(mhd.mhd_tat_denominatior_tickets), 0) as avg_tat_days,
mhd.lob




## Bot Contact Ratio (%)

Bot Contact Ratio tracks the percentage of customer service interactions handled by automated bots versus total contact volume, serving as a key efficiency metric for customer care operations. The metric includes two variants: total bot interactions (including both active sessions and dropoffs where customers abandoned the bot interaction) and active bot sessions only (successful bot engagements). Both metrics are calculated monthly and use the same base denominator (cr_base_count) representing total contact volume. This helps care teams measure automation effectiveness, identify trends in bot adoption, and optimize the balance between automated and human support channels.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - showing all available data

--- specific filters
--- temporal range filter set to "No filter" - includes all time periods

--- calculation_logic
100 * SUM(bot_ticket_count) / NULLIF(MAX(cr_base_count), 0) AS bot_total_ratio,
100 * SUM(bot_active_ticket_count) / NULLIF(MAX(cr_base_count), 0) AS bot_active_ratio




## Top Bot L2 Issues

This metric tracks the distribution of active support tickets across different L2 bot categories within the MHD care system. It measures bot_active_ticket_count summed by bot_l2 groupings to identify which L2 bot issues have the highest volume of open tickets. The analysis helps support teams understand workload distribution across bot-related L2 issues and prioritize resolution efforts. With no active temporal filters applied, it provides a current snapshot of all active bot tickets across L2 categories. This visibility enables support managers to allocate resources effectively and identify problematic bot categories requiring immediate attention.

-- tables_involved
hive.team_servicesone.Bot_issue_l2_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- temporal filter available but currently set to "No filter"
--- created_date TEMPORAL_RANGE (configurable)

--- specific filters
--- none applied in current configuration

--- calculation_logic
sum(bot_active_ticket_count) as total_active_tickets,
grouped by bot_l2




## Top Bot L2 Issues

This metric tracks the total count of active bot-related support tickets aggregated by L2 issue categories within the ServicesOne support system for MHD operations. It provides visibility into bot performance issues and support ticket volumes across different second-level categorizations, helping support teams identify problematic bot functionalities and prioritize resolution efforts. The metric sums all active ticket counts without temporal restrictions, giving a current snapshot of bot-related support burden by issue type for operational monitoring and resource allocation decisions.

-- tables_involved
hive.team_servicesone.Bot_issue_l2_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no temporal restrictions applied (filter set to "No filter")

--- specific filters
--- none specified

--- calculation_logic
sum(bot_active_ticket_count) as total_active_tickets,
grouped by bot_l2




## Top DSAT Reason -  Bot

This metric tracks the total count of negative bot responses segmented by bot L2 categories to identify primary sources of bot-related customer dissatisfaction. It serves as a key performance indicator for bot effectiveness in customer service interactions, helping teams prioritize bot improvement efforts by highlighting which specific bot interaction types generate the most negative customer feedback. The analysis aggregates all negative bot responses without time or categorical filters, providing a comprehensive view of bot performance issues across different interaction categories within the MHD (likely referring to a specific service domain or geography) care dashboard ecosystem.

-- tables_involved
hive.team_servicesone.Bot_issue_l2_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - includes all bot interactions

--- specific filters
--- no specific filters applied - comprehensive view across all bot L2 categories

--- calculation_logic
sum(bot_negative_response) as negative_response_count,
group by bot_l2




## Top L2 Issues - Human Agent

This metric tracks the volume of L2 support issues handled by human agents across all categories in the MHD care system. It aggregates total ticket counts by L2 issue type to identify the most prevalent support problems requiring human intervention. The data comes from a servicesone project view that categorizes support tickets by their L2 classification level. This analysis helps support managers understand workload distribution, identify recurring problem areas, and optimize resource allocation for human agents. The metric can be filtered by date ranges to analyze trends over specific time periods, though currently shows all-time aggregated data.

-- tables_involved
hive.team_servicesone.MHD_Agent_issue_l2_project_servicesone virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - shows all L2 issues across all time periods

--- specific filters
--- temporal filter for date range analysis (currently set to no filter)
--- created_date temporal range filter available for time-based segmentation

--- calculation_logic
sum(total_ticket_count) grouped by issue_l2




## Top DSAT Reason -  Bot

This metric tracks the total count of negative responses generated by bot interactions, segmented by Level 2 (L2) bot categories within the customer care ecosystem. It serves as a dissatisfaction indicator to help customer service teams identify which specific bot functionalities or conversation flows are generating the most negative user experiences. The analysis focuses on bot performance issues that require attention from the MHD (likely Mobile Handset Device) services team. By aggregating negative responses across different L2 bot categories, this metric enables prioritization of bot improvement efforts and helps measure the impact of bot-related customer service issues on overall satisfaction levels.

-- tables_involved
hive.team_servicesone.Bot_issue_l2_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - shows all bot L2 categories

--- specific filters
--- no specific filters applied - comprehensive view across all categories

--- calculation_logic
sum(bot_negative_response) as negative_response_count,
grouped by bot_l2 category




## Top L2 Issues - Human Agent

This metric tracks the total volume of support tickets categorized by Level 2 (L2) issue types handled by human agents within the Care Dashboard system. It aggregates ticket counts across all time periods to provide a comprehensive view of issue distribution patterns. The metric serves to identify the most frequent L2 issue categories, enabling support management to allocate resources effectively, prioritize training programs, and implement targeted process improvements. By understanding which issue types generate the highest ticket volumes, teams can focus on root cause analysis and preventive measures for the most impactful problems affecting customer experience.

-- tables_involved
hive.team_servicesone.MHD_Agent_issue_l2_project_servicesone virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- temporal filter available but currently disabled (No filter applied)
virtual_table.created_date IS NOT NULL

--- specific filters
--- none applied - showing all L2 issue categories across all time periods

--- calculation_logic
SUM(virtual_table.total_ticket_count) grouped by virtual_table.issue_l2




## Intent wise Final MSAT %

This metric measures customer satisfaction percentage by calculating the ratio of positive (happy) feedback to total feedback given, expressed as a percentage. It serves as a key performance indicator for customer experience quality across different customer service entities. The metric applies a temporal filter for the last week and excludes IVR merchant interactions to focus on human-assisted customer service performance. When no feedback is collected, it defaults to 0% to avoid division errors. This helps customer service teams track satisfaction trends and identify entities that may need improvement in service delivery.

-- tables_involved
hive.team_cst_mhd_product.mhd_msat_monthly_dashboard1 msat

--- standard filters to be applied unless specifically requested for a different categorical value
--- exclude IVR merchant interactions to focus on human-assisted service
msat.cst_entity <> 'ivr-merchant' AND
--- temporal filter for recent performance analysis
msat.date_ >= DATE '2025-11-25' AND msat.date_ < DATE '2025-12-02'

--- calculation_logic
CASE 
  WHEN SUM(feedback_given) = 0.00 THEN 0.00
  ELSE SUM(happy) * 100.00 / SUM(feedback_given)
END




## Bot to Service Passthrough (%)

Bot to Service Passthrough tracks the percentage of bot interactions that are escalated to human service agents, calculated as the ratio of bot-to-service ticket transfers to total bot active tickets multiplied by 100. This metric helps measure the effectiveness of automated customer service systems and identifies areas where bot capabilities may need improvement. The metric is segmented by line of business (lob) to enable performance comparison across different business units and service categories. A higher passthrough rate may indicate either complex customer issues requiring human intervention or opportunities to enhance bot intelligence and response capabilities.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - shows all bot interactions across all LOBs

--- specific filters
--- no specific filters applied - comprehensive view of all bot escalations

--- calculation_logic
100 * SUM(bot_to_service_ticket_count) / NULLIF(SUM(bot_active_ticket_count), 0) AS passthrough_percentage
GROUP BY lob




## Intent wise Final MSAT %

This metric tracks the customer satisfaction percentage (MSAT) by measuring the proportion of positive feedback responses across different customer service entities. The Final MSAT % represents happy feedback count as a percentage of total feedback received, with proper handling for cases where no feedback was provided (returning 0%). The metric is filtered to exclude IVR merchant interactions and focuses on the most recent week's performance, providing insights into customer satisfaction trends across various service touchpoints within the care dashboard ecosystem.

-- tables_involved
hive.team_cst_mhd_product.mhd_msat_monthly_dashboard1 msat

--- standard filters to be applied unless specifically requested for a different categorical value
--- exclude IVR merchant interactions to focus on human-assisted service channels
msat.cst_entity <> 'ivr-merchant' AND
--- temporal filter for recent performance analysis
msat.date_ >= DATE '2025-11-25' AND msat.date_ < DATE '2025-12-02'

--- calculation_logic
CASE 
  WHEN SUM(feedback_given) = 0.00 THEN 0.00
  ELSE SUM(happy) * 100.00 / SUM(feedback_given)
END




## Function Call SR%

This metric tracks success rates across multiple customer care functions within the Merchant Help Desk system, measuring operational efficiency for service request handling, settlement inquiries, agent transfers, hardware diagnostics, and broadcast testing. Each function calculates the percentage of successful attempts out of total attempts, providing visibility into system performance and identifying potential bottlenecks in customer support operations. The metrics are filtered to show recent performance over the last 10 days, enabling teams to monitor current operational health and respond quickly to degrading service levels across different support functions.

-- tables_involved
hive.team_cst_mhd_product.mhd_monthly_dashboard1 dashboard

--- standard filters to be applied unless specifically requested for a different time range
--- recent performance monitoring - last 10 days of operational data
dashboard.date_ >= CURRENT_DATE - INTERVAL '10' DAY

--- calculation_logic
pattern: success_rate_calculation
base_metrics: {function_name}_success, {function_name}_attempts
functions: [raiseservicerequest, get_settlement_and_payment_info, agent_handover, checksoundboxhardware, testbroadcast]




## Function Call SR%

This metric tracks success rates for various customer service request types in the MHD care system, measuring operational efficiency across different service functions. The success rate is calculated as the percentage of successful requests against total attempts, providing insight into system performance and customer service quality. Functions monitored include raising service requests, retrieving settlement and payment information, agent handover processes, soundbox hardware checks, and test broadcasts. Data is filtered to show the last 10 days of performance, allowing teams to monitor recent trends and identify service delivery issues across different operational areas.

-- tables_involved
hive.team_cst_mhd_product.mhd_monthly_dashboard1 dashboard

--- standard filters to be applied unless specifically requested for a different time range
--- recent performance monitoring window
dashboard.date_ >= CURRENT_DATE - INTERVAL '10' DAY

--- calculation_logic
pattern: success_rate_calculation
base_metrics: [raiseservicerequest, get_settlement_and_payment_info, agent_handover, checksoundboxhardware, testbroadcast]
aggregation: daily (date_trunc('day', CAST(date_ AS TIMESTAMP)))




## Bot to Service Passthrough (%)

This metric tracks the Bot to Service Passthrough percentage, measuring the rate at which customer interactions handled by chatbots get escalated to human service agents. The percentage is calculated by dividing the number of tickets transferred from bot to service by the total number of active bot tickets, then multiplying by 100. This KPI is segmented by Line of Business (lob) to provide insights into bot effectiveness and escalation patterns across different business units. A lower percentage indicates better bot performance and self-service capability, while higher percentages may signal areas where bot training or workflows need improvement. This metric helps optimize the balance between automated and human-assisted customer service.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied

--- specific filters
--- no specific filters applied - shows all LOB data

--- calculation_logic
100 * SUM(bot_to_service_ticket_count) / NULLIF(SUM(bot_active_ticket_count), 0) as passthrough_percentage
GROUP BY lob




## MHD Agent Tickets count (IVR)

This metric tracks the total volume of support tickets handled by agents through phone/IVR channels, segmented by line of business (LOB). It measures customer service workload distribution across different business units, helping identify which LOBs generate the highest phone support demand. The metric aggregates ticket counts to provide visibility into agent phone interaction volume for capacity planning and resource allocation. This supports operational monitoring of customer care efficiency and helps management understand phone support patterns across different business segments within the MHD services organization.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - shows all LOB data

--- specific filters
--- no specific filters applied - comprehensive view across all LOBs

--- calculation_logic
sum(agent_ticket_count_phone) as phone_ticket_count
group by lob




## MHD Agent Tickets count (IVR)

This metric tracks the total number of customer service tickets handled by MHD (Merchant Help Desk) agents through the phone/IVR channel, segmented by line of business (LOB). It measures the operational workload distribution across different business units for phone-based customer support interactions. The metric aggregates all phone ticket counts without time-based or categorical filters, providing a comprehensive view of agent ticket volume by business line. This helps operations teams understand support demand patterns across different product lines and allocate agent resources accordingly for phone-based customer service channels.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - shows all data

--- specific filters
--- no specific filters applied - comprehensive view across all LOBs and time periods

--- calculation_logic
sum(agent_ticket_count_phone) as total_phone_tickets,
group by lob




## Service Tickets Count (IVR)

This metric tracks the total count of service tickets generated from IVR (Interactive Voice Response) calls, segmented by line of business. It measures customer service demand originating from automated phone interactions, helping identify which business units receive the most IVR-generated support requests. The data aggregates all IVR call-to-ticket conversions without any date or categorical filters applied, providing a comprehensive view of service ticket volume across all lines of business. This metric supports capacity planning and resource allocation decisions for customer care teams by showing the distribution of IVR-originated service requests.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - shows all IVR service tickets across all time periods

--- specific filters
--- no specific filters applied - comprehensive view across all dimensions

--- calculation_logic
sum(ivr_call_to_service_ticket) as total_ivr_tickets
group by lob




## Service Tickets Count (IVR)

This metric tracks the total count of IVR (Interactive Voice Response) calls that escalated to service tickets, segmented by Line of Business (LOB). It measures customer service operational efficiency by identifying which business lines generate the most service tickets from automated phone interactions. The metric helps assess IVR system effectiveness and customer self-service success rates across different product lines or business units. Higher counts may indicate either higher call volumes or less effective IVR systems that require human intervention. This data supports capacity planning, system optimization decisions, and resource allocation across different business lines within the customer care organization.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd combined

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - includes all LOBs and time periods

--- specific filters
--- no specific filters applied - comprehensive view across all business lines

--- calculation_logic
sum(combined.ivr_call_to_service_ticket) as ticket_count
group by combined.lob




## IVR Calls Count

This metric tracks the total volume of IVR (Interactive Voice Response) calls aggregated by week for the Care Dashboard MHD system. It measures customer service workload and call center activity by summing all IVR call interactions within weekly periods. The data comes from the combined services dataset and provides insights into call volume trends and patterns over time. The metric helps operations teams understand customer engagement levels, plan staffing requirements, and identify peak periods of customer service demand. No specific filters are applied, giving a complete view of all IVR call activity across the entire dataset timeframe.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- temporal range filter available but currently set to no filter
virtual_table.created_date IS NOT NULL

--- specific filters
--- none applied - showing all IVR call data

--- calculation_logic
SUM(virtual_table.ivr_calls) AS total_ivr_calls,
date_trunc('week', CAST(virtual_table.created_date AS TIMESTAMP)) AS week_period




## IVR Calls Count

This metric tracks the total volume of IVR (Interactive Voice Response) calls aggregated on a weekly basis for customer service operations monitoring. It measures customer engagement through automated phone systems, helping identify call volume patterns and trends over time. The metric sums all IVR calls from the combined service data and groups them by week, providing insights into customer service demand and system usage. This data supports capacity planning, staffing decisions, and understanding customer behavior patterns in the MHD business unit's care operations.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- temporal filter allows flexible date range selection
date_trunc('week', CAST(virtual_table.created_date AS TIMESTAMP)) IS NOT NULL

--- calculation_logic
sum(virtual_table.ivr_calls) as total_ivr_calls,
date_trunc('week', CAST(virtual_table.created_date AS TIMESTAMP)) as week_period




## Unique Merchant Count - IVR

This metric tracks the total count of unique merchants utilizing IVR (Interactive Voice Response) services, aggregated on a weekly basis. It serves as a key indicator for measuring merchant adoption and engagement with voice-based customer service channels. The data is sourced from the combined MHD (Merchant Help Desk) dataset and provides insights into merchant service utilization patterns over time. The weekly aggregation helps identify trends in IVR service usage, supporting capacity planning and service optimization decisions for merchant support operations.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - displays all available time periods

--- specific filters
--- temporal filter shows "No filter" - no date restrictions applied

--- calculation_logic
sum(ivr_merchant_count) as merchant_count,
date_trunc('week', CAST(created_date AS TIMESTAMP)) as time_dimension




## IVR Contact Ratio (%)

IVR Contact Ratio measures the percentage of interactions that utilize Interactive Voice Response systems relative to the total available contact opportunities. This metric helps assess customer preference for automated voice systems versus other contact channels and indicates the effectiveness of IVR deployment in the customer service ecosystem. The calculation divides total IVR calls by the maximum base count to determine penetration rate, with results aggregated monthly to track trends over time. This percentage-based metric enables comparison across different time periods and helps identify patterns in customer behavior regarding automated voice interaction preferences within the Care Dashboard MHD system.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- temporal filter for date range selection
virtual_table.created_date IS NOT NULL

--- specific filters
--- no additional specific filters beyond temporal range

--- calculation_logic
100 * SUM(virtual_table.ivr_calls) / NULLIF(MAX(virtual_table.cr_base_count), 0) AS ivr_contact_ratio_pct
GROUP BY date_trunc('month', CAST(virtual_table.created_date AS TIMESTAMP))




## Unique Merchant Count - IVR

This metric tracks the unique count of merchants utilizing IVR (Interactive Voice Response) services within the Care Dashboard ecosystem, providing insights into merchant adoption and engagement with voice-based support channels. The data is aggregated weekly to show trends in merchant participation over time, helping assess the effectiveness and reach of IVR services. The metric represents pre-calculated merchant counts that are summed across the specified time period, offering stakeholders visibility into merchant service utilization patterns and supporting operational planning for IVR infrastructure and support capacity.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - temporal range set to "No filter"

--- specific filters
--- weekly aggregation for trend analysis
date_trunc('week', CAST(virtual_table.created_date AS TIMESTAMP))

--- calculation_logic
sum(virtual_table.ivr_merchant_count) as merchant_count




## MHD Agent Ticket Count - IVR

This metric tracks weekly ticket volumes for Mental Health Department (MHD) operations through IVR channels, measuring both agent-handled tickets and service-routed tickets. The MHD Agent metric counts phone tickets handled directly by agents, while the Service metric tracks tickets routed to service channels through IVR automation. This helps monitor call center performance, workload distribution, and the effectiveness of IVR routing decisions. The data is aggregated by week to identify trends in ticket volumes and the balance between human agent intervention versus automated service routing, enabling capacity planning and operational efficiency improvements for mental health support services.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- temporal filter allows all time periods (no filter applied)
1 = 1

--- specific filters
--- no specific filters applied for this base metric

--- calculation_logic
sum(agent_ticket_count_phone) as mhd_agent_tickets,
sum(ivr_to_service_ticket_count) as service_routed_tickets,
date_trunc('week', cast(created_date as timestamp)) as week_period




## IVR Contact Ratio (%)

The IVR Contact Ratio tracks the percentage of customer interactions that utilize Interactive Voice Response systems relative to the total contact base count, aggregated monthly. This metric helps assess the effectiveness and adoption of automated customer service channels versus other contact methods. The calculation uses a safe division approach with NULLIF to prevent division by zero errors, ensuring robust reporting even when base counts are zero. The monthly aggregation provides trend analysis for contact center management to optimize resource allocation between automated and human-assisted customer service channels, enabling strategic decisions about IVR system investments and capacity planning.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- temporal filter on creation date (default range applied)
date_trunc('month', CAST(virtual_table.created_date AS TIMESTAMP)) IS NOT NULL

--- specific filters
--- no additional specific filters applied

--- calculation_logic
100 * SUM(virtual_table.ivr_calls) / NULLIF(MAX(virtual_table.cr_base_count), 0) AS ivr_contact_ratio_pct,
GROUP BY date_trunc('month', CAST(virtual_table.created_date AS TIMESTAMP)),
ORDER BY ivr_contact_ratio_pct DESC




## Unique Merchant Count - MHD Agent (IVR)

This metric tracks unique merchant counts accessing MHD (Merchant Help Desk) support services through two primary channels: phone-based agent support and IVR (Interactive Voice Response) self-service. The business purpose is to monitor support channel utilization and merchant engagement patterns to optimize resource allocation and service delivery. Data is aggregated weekly to show trends in merchant support needs across different service channels. The metric helps identify whether merchants prefer human agent assistance or automated IVR services, enabling strategic decisions about support infrastructure and staffing. This operational dashboard supports the Care team in understanding merchant behavior and service demand patterns for the MHD platform.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- temporal range filter for analysis period selection
virtual_table.created_date TEMPORAL_RANGE (configurable date range)

--- calculation_logic
SUM(virtual_table.agent_ticket_merchant_count_phone) as mhd_agent_count,
SUM(virtual_table.ivr_to_service_ticket_merchant_count) as service_count




## Unique Merchant Count - MHD Agent (IVR)

This metric tracks unique merchant counts seeking support through MHD (Merchant Help Desk) channels, specifically phone-based agent interactions and IVR-to-service ticket conversions. It measures merchant engagement with customer support services by counting distinct merchants who created tickets through each channel. The data is aggregated weekly to show trends in merchant support needs and channel preference over time. The MHD Agent metric captures merchants who directly contacted phone support, while the Service metric tracks merchants who escalated from IVR systems to service tickets. This helps identify support volume patterns and channel utilization for merchant assistance programs.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- temporal range filter (currently no specific filter applied)
virtual_table.created_date IS NOT NULL

--- specific filters
--- no additional filters specified

--- calculation_logic
SUM(virtual_table.agent_ticket_merchant_count_phone) as mhd_agent_count,
SUM(virtual_table.ivr_to_service_ticket_merchant_count) as service_count,
date_trunc('week', CAST(virtual_table.created_date AS TIMESTAMP)) as week_period




## MHD Agent Ticket Count - IVR

This metric tracks MHD (Mobile Help Desk) ticket volumes specifically for the IVR channel, measuring both agent-handled phone tickets and service tickets that originate from IVR interactions. The chart aggregates data weekly to show trends in customer support ticket creation through voice channels. The "MHD Agent" metric captures tickets that require direct agent intervention via phone, while the "Service" metric tracks tickets routed to service teams from IVR systems. This analysis helps evaluate IVR channel effectiveness, agent workload distribution, and service ticket routing patterns. The weekly aggregation provides insights into support volume trends and helps identify peak periods for resource planning and IVR system optimization.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different time range
--- temporal filter with default range (specific range not specified in metadata)
CAST(virtual_table.created_date AS TIMESTAMP) >= {default_start_date} AND
CAST(virtual_table.created_date AS TIMESTAMP) <= {default_end_date}

--- calculation_logic
sum(virtual_table.agent_ticket_count_phone) as mhd_agent_tickets,
SUM(virtual_table.ivr_to_service_ticket_count) as service_tickets,
date_trunc('week', CAST(virtual_table.created_date AS TIMESTAMP)) as week_period




## Monthly AVG Latency (seconds)

This metric tracks the monthly average system latency in seconds, providing insights into service performance trends across different months of the year. It calculates the mean response time from the overall latency analysis data, excluding January from the analysis period. The visualization helps identify seasonal patterns, performance degradation, or improvements in system responsiveness over time. This is essential for service level monitoring and capacity planning, allowing teams to correlate latency spikes with business cycles, system changes, or load variations throughout the year.

-- tables_involved
hive.team_cst_mhd_product.overall_latency_analysis1 ola

--- standard filters to be applied unless specifically requested for a different categorical value
--- exclude january data from monthly analysis
ola.month_ > 1

--- calculation_logic
AVG(ola.all_avg_latency) as avg_latency,
CASE ola.month_
    WHEN 1 THEN 'January'
    WHEN 2 THEN 'February'
    WHEN 3 THEN 'March'
    WHEN 4 THEN 'April'
    WHEN 5 THEN 'May'
    WHEN 6 THEN 'June'
    WHEN 7 THEN 'July'
    WHEN 8 THEN 'August'
    WHEN 9 THEN 'September'
    WHEN 10 THEN 'October'
    WHEN 11 THEN 'November'
    WHEN 12 THEN 'December'
    ELSE 'Invalid'
END as month_name




## Monthly AVG Latency (seconds)

This metric tracks the monthly average system latency in seconds for MHD Care Dashboard operations, providing insights into service performance trends over time. The analysis excludes January data to focus on operational months, helping teams monitor system responsiveness and identify performance patterns. The latency measurement serves as a key performance indicator for system health, enabling proactive identification of performance degradation and supporting capacity planning decisions. This metric supports operational excellence by providing visibility into response times that directly impact user experience and service quality.

-- tables_involved
hive.team_cst_mhd_product.overall_latency_analysis1 ola

--- standard filters to be applied unless specifically requested for a different categorical value
--- exclude january data from analysis
ola.month_ > 1

--- calculation_logic
AVG(ola.all_avg_latency) as avg_latency,
CASE ola.month_
  WHEN 1 THEN 'January'
  WHEN 2 THEN 'February'
  WHEN 3 THEN 'March'
  WHEN 4 THEN 'April'
  WHEN 5 THEN 'May'
  WHEN 6 THEN 'June'
  WHEN 7 THEN 'July'
  WHEN 8 THEN 'August'
  WHEN 9 THEN 'September'
  WHEN 10 THEN 'October'
  WHEN 11 THEN 'November'
  WHEN 12 THEN 'December'
  ELSE 'Invalid'
END as month_name,
MAX(ola.year_) * 100 + MAX(ola.month_) as year_month_sort




## Monthly Median Latency

This metric tracks average median latency performance across months to identify seasonal patterns and performance trends in system response times. It measures the monthly aggregation of median latency values from the overall latency analysis, excluding January data to focus on operational months. The metric helps the MHD team monitor system performance consistency, detect performance degradation patterns, and identify months with optimal or suboptimal latency characteristics. By averaging median values rather than using raw latency data, it provides a stable view of typical monthly performance while filtering out extreme outliers that could skew traditional mean calculations.

-- tables_involved
hive.team_cst_mhd_product.overall_latency_analysis1 ola

--- standard filters to be applied unless specifically requested for a different categorical value
--- exclude January data from analysis
ola.month_ > 1

--- calculation_logic
AVG(ola.median_latency) as median_latency,
CASE ola.month_
  WHEN 1 THEN 'January' WHEN 2 THEN 'February' WHEN 3 THEN 'March'
  WHEN 4 THEN 'April' WHEN 5 THEN 'May' WHEN 6 THEN 'June'
  WHEN 7 THEN 'July' WHEN 8 THEN 'August' WHEN 9 THEN 'September'
  WHEN 10 THEN 'October' WHEN 11 THEN 'November' WHEN 12 THEN 'December'
  ELSE 'Invalid'
END as month_name




## Monthly Median Latency

Monthly Median Latency tracks the average of median latency values across different months to identify seasonal performance trends in the MHD care system. This metric helps operations teams understand latency patterns throughout the year by aggregating median response times on a monthly basis. The analysis excludes January data to focus on operational months (February through December), suggesting either incomplete January data or specific business requirements. The metric provides insights into system performance consistency and helps identify months with higher or lower latency trends for capacity planning and performance optimization initiatives.

-- tables_involved
hive.team_cst_mhd_product.overall_latency_analysis1 ola

--- standard filters to be applied unless specifically requested for a different categorical value
--- exclude january data from analysis
ola.month_ > 1

--- calculation_logic
AVG(ola.median_latency) as median_latency,
CASE ola.month_
  WHEN 2 THEN 'February'
  WHEN 3 THEN 'March'
  WHEN 4 THEN 'April'
  WHEN 5 THEN 'May'
  WHEN 6 THEN 'June'
  WHEN 7 THEN 'July'
  WHEN 8 THEN 'August'
  WHEN 9 THEN 'September'
  WHEN 10 THEN 'October'
  WHEN 11 THEN 'November'
  WHEN 12 THEN 'December'
END AS month_name,
MAX(ola.year_) * 100 + MAX(ola.month_) AS year_month_sort




## Monthly P95 Latency

This metric tracks the average P95 latency performance across months to monitor system response time trends. P95 latency represents the 95th percentile response time, meaning 95% of requests complete faster than this threshold. The analysis excludes January data, focusing on operational months from February onwards. This metric helps identify performance degradation patterns, seasonal variations, and supports capacity planning decisions. The monthly aggregation provides a high-level view of system performance stability over time, enabling teams to detect long-term trends and correlate performance changes with system modifications or load variations.

-- tables_involved
hive.team_cst_mhd_product.overall_latency_analysis1 latency

--- standard filters to be applied unless specifically requested for a different categorical value
--- exclude january data (potentially incomplete or baseline month)
latency.month_ > 1

--- calculation_logic
AVG(latency.p95_latency) as P95,
CASE latency.month_
  WHEN 1 THEN 'January'
  WHEN 2 THEN 'February'
  WHEN 3 THEN 'March'
  WHEN 4 THEN 'April'
  WHEN 5 THEN 'May'
  WHEN 6 THEN 'June'
  WHEN 7 THEN 'July'
  WHEN 8 THEN 'August'
  WHEN 9 THEN 'September'
  WHEN 10 THEN 'October'
  WHEN 11 THEN 'November'
  WHEN 12 THEN 'December'
  ELSE 'Invalid'
END AS month_name




## Monthly P99 Latency

Monthly P99 Latency tracks the average 99th percentile response time performance across months, providing insights into system performance trends and identifying seasonal patterns in latency. This metric helps monitor service quality and detect performance degradation over time. The analysis excludes January data to focus on consistent operational periods, potentially avoiding holiday-period anomalies or incomplete data collection. P99 latency represents the response time threshold that 99% of requests complete under, making it a critical indicator for user experience quality. This dashboard serves the Care team for MHD product monitoring and performance optimization decisions.

-- tables_involved
hive.team_cst_mhd_product.overall_latency_analysis1 ola

--- standard filters to be applied unless specifically requested for a different categorical value
--- exclude january data for consistent analysis
ola.month_ > 1

--- calculation_logic
AVG(ola.p99_latency) as p99_avg




## Monthly P90 Latency

This metric tracks monthly P90 latency performance by averaging P90 latency values across each month, excluding January from the analysis. P90 latency represents the 90th percentile response time, meaning 90% of requests complete faster than this threshold. The metric helps monitor system performance trends over time and identify seasonal patterns or degradation in service quality. It's particularly useful for SLA monitoring and capacity planning in the Care Dashboard context, where consistent low latency is critical for customer support operations.

-- tables_involved
hive.team_cst_mhd_product.overall_latency_analysis1 ola

--- standard filters to be applied unless specifically requested for a different categorical value
--- exclude January from monthly analysis
ola.month_ > 1

--- calculation_logic
AVG(ola.p90_latency) AS p90_avg,
CASE ola.month_
    WHEN 1 THEN 'January'
    WHEN 2 THEN 'February'
    WHEN 3 THEN 'March'
    WHEN 4 THEN 'April'
    WHEN 5 THEN 'May'
    WHEN 6 THEN 'June'
    WHEN 7 THEN 'July'
    WHEN 8 THEN 'August'
    WHEN 9 THEN 'September'
    WHEN 10 THEN 'October'
    WHEN 11 THEN 'November'
    WHEN 12 THEN 'December'
END AS month_name




## Monthly P95 Latency

This metric tracks the average P95 latency performance across months to monitor system responsiveness and identify performance trends. P95 latency represents the 95th percentile of response times, meaning 95% of requests complete faster than this threshold. The analysis excludes January data to focus on operational months, likely for seasonal business reasons or data quality considerations. This metric serves as a key performance indicator for system health monitoring, enabling teams to detect performance degradation, assess the impact of system changes, and maintain service level agreements. The monthly aggregation provides insights into long-term performance trends and seasonal patterns in system behavior.

-- tables_involved
hive.team_cst_mhd_product.overall_latency_analysis1 lat

--- standard filters to be applied unless specifically requested for a different categorical value
--- exclude January data from analysis (operational requirement)
lat.month_ > 1

--- calculation_logic
AVG(lat.p95_latency) as p95_average,
CASE lat.month_
  WHEN 2 THEN 'February' WHEN 3 THEN 'March' WHEN 4 THEN 'April'
  WHEN 5 THEN 'May' WHEN 6 THEN 'June' WHEN 7 THEN 'July'
  WHEN 8 THEN 'August' WHEN 9 THEN 'September' WHEN 10 THEN 'October'
  WHEN 11 THEN 'November' WHEN 12 THEN 'December'
  ELSE 'Invalid'
END as month_name,
MAX(lat.year_) * 100 + MAX(lat.month_) as sort_key




## Monthly P90 Latency

Monthly P90 Latency tracks the average 90th percentile response time performance across months, providing insights into system performance trends and latency distribution patterns. This metric helps identify seasonal performance variations and long-term latency trends by aggregating P90 latency measurements monthly. The analysis excludes January data to focus on operational months, likely avoiding holiday or year-start anomalies. The metric serves as a key performance indicator for system reliability and user experience monitoring within the Care Dashboard MHD context, enabling performance optimization decisions based on historical latency patterns.

-- tables_involved
hive.team_cst_mhd_product.overall_latency_analysis1 ola

--- standard filters to be applied unless specifically requested for a different categorical value
--- exclude January data to focus on operational performance periods
ola.month_ > 1

--- calculation_logic
AVG(ola.p90_latency) as P90,
CASE ola.month_
  WHEN 1 THEN 'January'
  WHEN 2 THEN 'February'
  WHEN 3 THEN 'March'
  WHEN 4 THEN 'April'
  WHEN 5 THEN 'May'
  WHEN 6 THEN 'June'
  WHEN 7 THEN 'July'
  WHEN 8 THEN 'August'
  WHEN 9 THEN 'September'
  WHEN 10 THEN 'October'
  WHEN 11 THEN 'November'
  WHEN 12 THEN 'December'
  ELSE 'Invalid'
END AS month_name,
MAX(ola.year_) * 100 + MAX(ola.month_) AS year_month_sort




## Monthly P99 Latency

This metric tracks the average 99th percentile latency performance across months, providing critical insight into system performance consistency for the MHD (likely customer service or product) team. The P99 latency represents the response time threshold that 99% of requests complete under, making it essential for identifying performance degradation and ensuring service quality standards. The monthly aggregation enables trend analysis and performance tracking over time, while excluding January data suggests either incomplete data collection or baseline establishment. This metric is crucial for capacity planning, SLA monitoring, and identifying seasonal performance patterns that could impact customer experience.

-- tables_involved
hive.team_cst_mhd_product.overall_latency_analysis1 ola

--- standard filters to be applied unless specifically requested for a different categorical value
--- exclude january data (possibly incomplete or baseline period)
ola.month_ > 1

--- calculation_logic
AVG(ola.p99_latency) as p99_avg




## MHD Language Select - Last Week

This metric tracks MHD (Merchant Help Desk) support ticket sessions segmented by customer language preferences to optimize support resource allocation and language coverage. It measures distinct support tickets created by merchants over the last week, categorized by the language used in conversations (English, Hindi, Telugu, Tamil, Marathi, Kannada, Gujarati, Bengali, Malayalam, Punjabi). The analysis focuses specifically on MHD role type users and excludes conversations marked as 'Others' language to provide clear insights into primary language usage patterns. This data helps support teams understand merchant communication preferences and ensure adequate language support coverage across different regions and user segments.

-- tables_involved
hive.crm_cst.support_ticket_details_snapshot_v3 std
hive.crm_cst.ticket_session_conversation_snapshot_v3 tsc

--- standard filters to be applied unless specifically requested for a different categorical value
--- restrict to recent data for performance optimization
std.dl_last_updated >= CURRENT_DATE - INTERVAL '30' DAY AND
tsc.dl_last_updated >= CURRENT_DATE - INTERVAL '30' DAY AND
--- focus on ticket creation timeframe
DATE(std.created_at) >= CURRENT_DATE - INTERVAL '30' DAY AND
DATE(tsc.created_at) >= CURRENT_DATE - INTERVAL '30' DAY AND
--- ensure valid ticket records
std.id IS NOT NULL AND
--- filter for customer service and merchant help desk roles
std.role_type IN (1, 2) AND
--- restrict to specific source system
std.source = 100

--- specific filters
--- temporal filter for last week analysis
DATE(tsc.created_at) >= CURRENT_DATE - INTERVAL '7' DAY AND
DATE(tsc.created_at) < CURRENT_DATE AND
--- focus on MHD (Merchant Help Desk) interactions
std.type1 = 'MHD' AND
--- exclude unspecified languages for cleaner analysis
tsc.question_language_code IS NOT NULL AND
tsc.question_language_code <> 'Others'

--- calculation_logic
COUNT(DISTINCT tsc.ticket_id) as tickets,
CASE tsc.question_language_code 
  WHEN 'en' THEN 'English'
  WHEN 'hi' THEN 'Hindi' 
  WHEN 'te' THEN 'Telugu'
  WHEN 'mr' THEN 'Marathi'
  WHEN 'ta' THEN 'Tamil'
  WHEN 'kn' THEN 'Kannada'
  WHEN 'gu' THEN 'Gujarati'
  WHEN 'bn' THEN 'Bengali'
  WHEN 'ml' THEN 'Malayalam'
  WHEN 'pa' THEN 'Punjabi'
  ELSE 'Others'
END AS question_language_code




## MSAT + Fedback Given %

This metric tracks customer feedback engagement and satisfaction rates for MHD (Mobile Health Dashboard) care services. Feedback Received % measures the proportion of active sessions where users provided feedback, calculated as feedback_given divided by active_sessions. MSAT % (Mobile Satisfaction) measures the quality of that feedback, calculated as happy responses divided by total feedback_given. Both metrics include zero-division protection and are rounded to 2 decimal places. The metrics are typically filtered to show recent performance (last week by default) and help the care team understand both user engagement with feedback requests and overall satisfaction levels with the service experience.

-- tables_involved
hive.team_cst_mhd_product.mhd_msat_monthly_dashboard1 virtual_table

--- standard filters to be applied unless specifically requested for a different time period
--- temporal filter for recent performance analysis
virtual_table.date_ >= DATE '2025-11-25' AND virtual_table.date_ < DATE '2025-12-02'

--- calculation_logic
CASE
  WHEN SUM(active_sessions) = 0 THEN 0
  ELSE ROUND(SUM(feedback_given) * 100.0 / SUM(active_sessions), 2)
END AS "Feedback Received %",
CASE
  WHEN SUM(feedback_given) = 0 THEN 0
  ELSE ROUND(SUM(happy) * 100.0 / SUM(feedback_given), 2)
END AS "MSAT %"




## MHD Language Select - Last Week

This metric tracks MHD (Merchant Help Desk) support ticket language selection patterns over the last week period. It measures the count of distinct support tickets segmented by question language including English, Hindi, Telugu, Marathi, Tamil, Kannada, Gujarati, Bengali, Malayalam, and Punjabi. The analysis focuses specifically on MHD role type sessions (merchants seeking support) and excludes generic 'Others' language category to provide clear visibility into specific regional language preferences. This helps understand merchant demographic patterns and language support demand, enabling better resource allocation for multilingual customer service teams and identifying which regional languages require enhanced support capabilities.

-- tables_involved
hive.crm_cst.support_ticket_details_snapshot_v3 std
hive.crm_cst.ticket_session_conversation_snapshot_v3 tsc

--- standard filters to be applied unless specifically requested for a different categorical value
--- restrict to recent data for performance and relevance
std.dl_last_updated >= CURRENT_DATE - INTERVAL '30' DAY AND
DATE(std.created_at) >= CURRENT_DATE - INTERVAL '30' DAY AND
tsc.dl_last_updated >= CURRENT_DATE - INTERVAL '30' DAY AND
DATE(tsc.created_at) >= CURRENT_DATE - INTERVAL '30' DAY AND
--- exclude null ticket ids to ensure valid session data
std.id IS NOT NULL AND
--- filter for valid role types (CST=1, MHD=2)
std.role_type IN (1, 2) AND
--- source system filter for consistency
std.source = 100

--- specific filters
--- temporal range filter for last week analysis
DATE(tsc.created_at) >= CURRENT_DATE - INTERVAL '7' DAY AND
--- focus on MHD (merchant) support sessions only
std.role_type = 2 AND
--- exclude generic language category to focus on specific languages
tsc.question_language_code IS NOT NULL AND
tsc.question_language_code <> 'Others'

--- calculation_logic
COUNT(DISTINCT tsc.ticket_id) as tickets,
CASE tsc.question_language_code
  WHEN 'en' THEN 'English'
  WHEN 'hi' THEN 'Hindi' 
  WHEN 'te' THEN 'Telugu'
  WHEN 'mr' THEN 'Marathi'
  WHEN 'ta' THEN 'Tamil'
  WHEN 'kn' THEN 'Kannada'
  WHEN 'gu' THEN 'Gujarati'
  WHEN 'bn' THEN 'Bengali'
  WHEN 'ml' THEN 'Malayalam'
  WHEN 'pa' THEN 'Punjabi'
  ELSE 'Others'
END AS question_language_code




## Agent Ticket Inflow

This metric tracks customer care ticket inflow and performance across different issue categories for the MHD care team. It measures total ticket volume, distribution between agent-handled and service tickets, average turnaround time (TAT) in days for resolution, and customer satisfaction (MSAT) percentages. The analysis focuses on actionable ticket categories by excluding generic, duplicate, or non-service related issues from both L1 and L2 classifications. This enables care teams to identify high-volume issue areas, monitor resolution efficiency, and track customer satisfaction across different support channels and issue types for operational optimization and resource allocation decisions.

-- tables_involved
hive.team_servicesone.MHD_Agent_issue_l2_project_servicesone vt

--- standard filters to exclude non-actionable ticket categories
--- exclude generic and non-service L1 issue types
vt.issue_l1 NOT IN ('outbound call done', 'non risk hold queries', 'Others', 'sr - miscellaneous', 'others', 'corporate - others', 'p2p - other issues_mid', 'sr- other issues_mid', 'pspl - not related to pspl', 'pg - duplicate ticket', 'technical - staging issue web', 'contactless - other', 'pg-junk', 'agent missed to tag', 'junk', 'retail - non- contactable', 'pspl - call drop', 'retail - others', 'sr - no issue found', 'retail - requested call back', 'refund - other', 'dhd - issue not clear', 'technical - other', 'retail - other', 'bsr - prohibited lob', 'onus_hd - others_edu', 'ee - outbound activity', 'mit - others', 'erm:intro/engagement call', 'other iss', 'other issues', 'chd - other issues_mid') AND
--- exclude generic and untagged L2 issue types
NOT (vt.issue_l2 IS NULL OR vt.issue_l2 IN ('N/A', 'other issues', 'language barrier', 'prohibited issues', 'tag not available', 'others'))

--- specific filters
--- temporal filter available but currently set to no filter
--- vt.created_date temporal range filter (configurable)

--- calculation_logic
SUM(total_ticket_count) as total_tickets,
SUM(agent_ticket_count) as agent_tickets,
SUM(service_ticket_count) as service_tickets,
SUM(sum_tat_days) / NULLIF(SUM(tat_denominatior_tickets), 0) as avg_tat_days,
SUM(sum_mhd_tat_days) / NULLIF(SUM(mhd_tat_denominatior_tickets), 0) as mhd_tat_days,
SUM(sum_service_tat_days) / NULLIF(SUM(service_tat_denominatior_tickets), 0) as service_tat_days,
100 * SUM(total_tickets_msat_received) / NULLIF(SUM(total_tickets_feedback_received), 0) as overall_msat_pct,
100 * SUM(agent_tickets_msat_received) / NULLIF(SUM(agent_tickets_feedback_received), 0) as agent_msat_pct,
100 * SUM(service_tickets_msat_received) / NULLIF(SUM(service_tickets_feedback_received), 0) as service_msat_pct




## Agent Ticket Inflow

This metric tracks customer service ticket inflow analytics for the Mobile Help Desk (MHD) system, measuring ticket volumes, resolution efficiency, and customer satisfaction across different issue categories. It segments tickets by L1 and L2 issue classifications while filtering out non-actionable categories like junk tickets, miscellaneous issues, and various "others" classifications to focus on meaningful business problems. The analysis includes total ticket counts, channel-specific breakdowns (MHD Agent vs Service), turnaround time calculations for each channel, and customer satisfaction scores (MSAT) to provide comprehensive operational insights for customer care management and performance optimization.

-- tables_involved
hive.team_servicesone.MHD_Agent_issue_l2_project_servicesone virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- exclude non-actionable L1 issue categories (junk, miscellaneous, others)
virtual_table.issue_l1 NOT IN ('outbound call done', 'non risk hold queries', 'Others', 'sr - miscellaneous', 'others', 'corporate - others', 'p2p - other issues_mid', 'sr- other issues_mid', 'pspl - not related to pspl', 'pg - duplicate ticket', 'technical - staging issue web', 'contactless - other', 'pg-junk', 'agent missed to tag', 'junk', 'retail - non- contactable', 'pspl - call drop', 'retail - others', 'sr - no issue found', 'retail - requested call back', 'refund - other', 'dhd - issue not clear', 'technical - other', 'retail - other', 'bsr - prohibited lob', 'onus_hd - others_edu', 'ee - outbound activity', 'mit - others', 'erm:intro/engagement call', 'other iss', 'other issues', 'chd - other issues_mid') AND
--- exclude non-actionable L2 issue categories (null, N/A, generic others)
NOT (virtual_table.issue_l2 IS NULL OR virtual_table.issue_l2 IN ('N/A', 'other issues', 'language barrier', 'prohibited issues', 'tag not available', 'others'))

--- specific filters
--- temporal filter for date range selection
--- virtual_table.created_date {temporal_range} (No filter currently applied)

--- calculation_logic
sum(total_ticket_count) as total_tickets,
sum(agent_ticket_count) as mhd_agent_tickets,
sum(service_ticket_count) as service_tickets,
sum(sum_tat_days)/nullif(sum(tat_denominatior_tickets),0) as overall_tat_days,
sum(sum_mhd_tat_days)/nullif(sum(mhd_tat_denominatior_tickets),0) as mhd_tat_days,
sum(sum_service_tat_days)/nullif(sum(service_tat_denominatior_tickets),0) as service_tat_days,
100 * sum(total_tickets_msat_received) / nullif(sum(total_tickets_feedback_received), 0) as overall_msat_percent,
100 * sum(agent_tickets_msat_received) / nullif(sum(agent_tickets_feedback_received), 0) as agent_msat_percent,
100 * sum(service_tickets_msat_received) / nullif(sum(service_tickets_feedback_received), 0) as service_msat_percent




## MSAT + Fedback Given %

This metric tracks customer satisfaction and feedback collection rates for MHD (Mobile Health Diagnostics) services within the care dashboard. It measures two key indicators: Feedback Received % calculates the proportion of active sessions where customers provided feedback, while MSAT % measures satisfaction levels among those who gave feedback (percentage rating service as "happy"). The metrics are filtered to show last week's data and grouped by day to track daily performance trends. Both calculations include zero-division protection to handle cases where no sessions or feedback occurred, ensuring reliable percentage reporting for care team performance monitoring.

-- tables_involved
hive.team_cst_mhd_product.mhd_msat_monthly_dashboard1 virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- temporal range filter for recent performance tracking
virtual_table.date_ >= DATE '2025-11-25' AND virtual_table.date_ < DATE '2025-12-02'

--- calculation_logic
CASE WHEN SUM(active_sessions) = 0 THEN 0 
     ELSE ROUND(SUM(feedback_given) * 100.0 / SUM(active_sessions), 2) END as feedback_received_pct,
CASE WHEN SUM(feedback_given) = 0 THEN 0 
     ELSE ROUND(SUM(happy) * 100.0 / SUM(feedback_given), 2) END as msat_pct




## Intent wise Tickets Creation %

This metric tracks the percentage of tickets that are successfully resolved on the first day (FD) for different customer service intents within the Care Dashboard. It measures operational efficiency by calculating what proportion of total tickets for each business category (Business Loan, Profile, Wealth, Soundbox Service, Soundbox Agent Handover, and Payout & Settlement) are resolved within the first day of creation. The metric helps identify which service areas have better first-day resolution rates, enabling teams to focus improvement efforts on underperforming categories. Data is filtered to show the most recent 7 days of activity, providing current operational insights for customer care performance management across different product verticals.

-- tables_involved
hive.team_cst_mhd_product.mhd_monthly_dashboard1 dashboard

--- standard filters to be applied unless specifically requested for a different time period
--- recent activity analysis for current operational insights
dashboard.date_ >= CURRENT_DATE - INTERVAL '7' DAY

--- calculation_logic
pattern: first_day_resolution_percentage
base_metrics: {intent}_fd_tickets, {intent}_tickets
categories: [businessloan, profile, wealth, soundbox, payoutandsettlement]




## Intent wise Tickets Creation %

This metric measures the percentage of tickets that are successfully deflected or resolved through first-day resolution (FD) across different product and service categories including Business Loan, Profile, Wealth, SoundBox Service, SoundBox Agent Handover, and Payout & Settlement. The calculation represents the ticket deflection rate by dividing FD tickets by total tickets for each category and multiplying by 100. This helps the care team understand which product areas have better self-service or automated resolution capabilities. The metric is filtered to show the last 7 days of performance and provides insights into operational efficiency across different customer intents and service categories.

-- tables_involved
hive.team_cst_mhd_product.mhd_monthly_dashboard1 dash

--- standard filters to be applied unless specifically requested for a different time period
--- last 7 days temporal filter for recent performance tracking
dash.date_ >= CURRENT_DATE - INTERVAL '7' DAY

--- specific filters
--- segmented by product/service category for intent-wise analysis
--- parameter values: p4bbusinessloan, p4bprofile, p4bwealth, p4bsoundbox, p4bpayoutandsettlement
{category}_tickets > 0 AND {category}_fd_tickets IS NOT NULL

--- calculation_logic
pattern: ticket_deflection_percentage
base_metrics: {category}_fd_tickets, {category}_tickets
formula: CASE WHEN SUM({category}_tickets) = 0 THEN NULL ELSE SUM({category}_fd_tickets) * 100/SUM({category}_tickets) END




## Function Calls #

This metric tracks daily function call volumes across six key merchant help desk operations over the past 7 days. It measures system usage for critical support functions including merchant detail fetching, agent handover processes, service request creation, settlement and payment information retrieval, soundbox hardware diagnostics, and test broadcast functionality. The data helps monitor operational load distribution across different MHD services, identify usage patterns, and assess system capacity needs. Each function serves distinct merchant support workflows, providing visibility into which services are most frequently accessed and helping optimize resource allocation for customer service operations.

-- tables_involved
hive.team_cst_mhd_product.mhd_monthly_dashboard1 mhd

--- standard filters to be applied unless specifically requested for a different time period
--- temporal filter for recent operational data analysis
mhd.date_ >= CURRENT_DATE - INTERVAL '7' DAY

--- calculation_logic
sum(mhd.fetch_merchant_sessions) as FetchMerchantDetails,
sum(mhd.agent_handover_attempts) as AgentHandover,
sum(mhd.raiseservicerequest_attempts) as RaiseServiceRequest,
sum(mhd.get_settlement_and_payment_info_attempts) as SettlementAndPaymentInfo,
sum(mhd.checksoundboxhardware_attempts) as CheckSoundboxHardware,
sum(mhd.testbroadcast_attempts) as TestBroadcast
GROUP BY date_trunc('day', CAST(mhd.date_ AS TIMESTAMP))




## Function Calls #

Function Calls tracks the volume of API function call attempts across six key merchant help desk operations: fetching merchant details, agent handover processes, service request creation, settlement and payment information retrieval, soundbox hardware diagnostics, and test broadcast functionality. This metric provides operational visibility into system usage patterns and function-specific demand over a rolling 7-day period. The data is aggregated daily to show trends in merchant support system utilization, helping identify peak usage periods and potential system performance bottlenecks across different operational functions.

-- tables_involved
hive.team_cst_mhd_product.mhd_monthly_dashboard1 mhd

--- standard filters to be applied unless specifically requested for a different categorical value
--- rolling 7-day lookback for recent operational trends
mhd.date_ >= CURRENT_DATE - INTERVAL '7' DAY

--- calculation_logic
sum(mhd.fetch_merchant_sessions) as FetchMerchantDetails,
sum(mhd.agent_handover_attempts) as AgentHandover,
sum(mhd.raiseservicerequest_attempts) as RaiseServiceRequest,
sum(mhd.get_settlement_and_payment_info_attempts) as SettlementAndPaymentInfo,
sum(mhd.checksoundboxhardware_attempts) as CheckSoundboxHardware,
sum(mhd.testbroadcast_attempts) as TestBroadcast




## Language Change Metrics

Language Change Metrics tracks the frequency of language transitions made by users within the care/support system. This metric measures how often users switch from one language to another during their interactions, providing insights into multilingual user behavior and language preference patterns. The data excludes the current date to ensure only complete daily records are analyzed, and results are ordered by transition frequency to identify the most common language switches. This information helps optimize language support capabilities and understand user language preferences in customer care scenarios.

-- tables_involved
hive.team_cst_mhd_product.langauge_transition_base lt

--- standard filters to be applied unless specifically requested for a different categorical value
--- exclude current date to ensure complete daily data only
lt.date_ < CURRENT_DATE

--- specific filters
--- no additional specific filters applied

--- calculation_logic
sum(lt.transition_count) as language_change_count,
grouped by lt.language_transition




## Language Change Metrics

Language Change Metrics tracks the volume of language transitions made by users, measuring how frequently customers switch between different language preferences in the system. This metric aggregates transition counts by language transition type, providing insights into multilingual user behavior and language preference changes. The analysis focuses on historical data excluding the current date to ensure complete daily data capture. Results are ranked by transition volume to identify the most common language switching patterns, helping customer service teams understand language usage trends and optimize multilingual support capabilities.

-- tables_involved
hive.team_cst_mhd_product.langauge_transition_base lt

--- standard filters to be applied unless specifically requested for a different categorical value
--- exclude current date to ensure complete daily data
lt.date_ < CURRENT_DATE

--- specific filters
--- no additional specific filters applied

--- calculation_logic
sum(lt.transition_count) as language_change_count,
group by lt.language_transition,
order by language_change_count desc,
limit 10




## Intent wise Bot MSAT %

Bot MSAT % measures merchant satisfaction with bot interactions by calculating the percentage of positive feedback (bot_happy) out of total feedback provided (bot_feedback_given). This metric helps evaluate bot performance and merchant experience quality in customer service interactions. The calculation includes safeguards against division by zero, returning 0% when no feedback is available. Data is filtered to exclude IVR merchant entities and focuses on recent performance over the last week timeframe, providing insights into current bot effectiveness across different customer service entities.

-- tables_involved
hive.team_cst_mhd_product.mhd_msat_monthly_dashboard1 msat

--- standard filters to be applied unless specifically requested for a different categorical value
--- exclude IVR merchant interactions from satisfaction analysis
msat.cst_entity <> 'ivr-merchant' AND
--- temporal filter for recent performance analysis
msat.date_ >= DATE '2025-11-25' AND msat.date_ < DATE '2025-12-02'

--- calculation_logic
CASE 
  WHEN SUM(bot_feedback_given) = 0.00 THEN 0.00
  ELSE SUM(bot_happy) * 100.00 / SUM(bot_feedback_given)
END




## Intent wise Bot MSAT %

Bot MSAT % measures merchant satisfaction with bot interactions by calculating the percentage of positive feedback received. This metric divides the sum of happy bot interactions by total bot feedback given, multiplied by 100, with a zero-division safety check. It's filtered to exclude IVR merchant entities and typically analyzed over the last week period. The metric helps evaluate bot performance in customer service scenarios within the Care Dashboard, providing insights into how well automated interactions are meeting merchant expectations and identifying areas for bot improvement.

-- tables_involved
hive.team_cst_mhd_product.mhd_msat_monthly_dashboard1 msat

--- standard filters to be applied unless specifically requested for a different categorical value
--- exclude IVR merchant interactions from satisfaction analysis
msat.cst_entity <> 'ivr-merchant'

--- specific filters
--- temporal filter for recent analysis period
msat.date_ >= DATE '2025-11-25' AND msat.date_ < DATE '2025-12-02'

--- calculation_logic
CASE 
  WHEN SUM(bot_feedback_given) = 0.00 THEN 0.00
  ELSE SUM(bot_happy) * 100.00 / SUM(bot_feedback_given)
END




## Bot MSAT + Fedback Rate %

This metric tracks bot customer satisfaction performance by measuring both feedback collection effectiveness and customer satisfaction rates. The Feedback Received percentage shows what proportion of active bot sessions resulted in user feedback, indicating engagement levels. The MSAT (Mean Satisfaction) percentage shows what proportion of collected feedback was positive, measuring actual satisfaction. These metrics are filtered to show last week's performance with daily granularity, helping monitor bot performance trends and identify areas for improvement in the mental health care chatbot service.

-- tables_involved
hive.team_cst_mhd_product.mhd_msat_monthly_dashboard1 virtual_table

--- standard filters to be applied unless specifically requested for a different time period
--- temporal range filter for recent performance analysis
date_ >= DATE '2025-11-25' AND date_ < DATE '2025-12-02'

--- calculation_logic
-- Feedback Collection Rate
CASE
  WHEN SUM(active_sessions) = 0
  THEN 0
  ELSE ROUND(
    SUM(bot_feedback_given) * 100.0
    /
    SUM(active_sessions),
    2
  )
END AS "Feedback Received %"

-- Customer Satisfaction Rate  
CASE
  WHEN SUM(bot_feedback_given) = 0
  THEN 0
  ELSE ROUND(
    SUM(bot_happy) * 100.0
    /
    SUM(feedback_given),
    2
  )
END AS "MSAT %"




## Bot MSAT + Fedback Rate %

This chart tracks customer satisfaction metrics for the MHD (MyHealth Dashboard) care service by measuring feedback engagement and satisfaction rates. The Feedback Received % indicates what proportion of active user sessions resulted in feedback submission, measuring customer engagement with the feedback system. The MSAT % (Most Satisfied) represents the percentage of submitted feedback that was positive, indicating customer satisfaction levels. Both metrics are calculated with zero-division protection and filtered to show the last week's performance with daily breakdowns. These metrics help evaluate both the effectiveness of feedback collection mechanisms and overall customer satisfaction trends for care services.

-- tables_involved
hive.team_cst_mhd_product.mhd_msat_monthly_dashboard1 virtual_table

--- standard filters to be applied unless specifically requested for a different time range
--- temporal filter for recent performance analysis
date_ >= DATE '2025-11-25' AND date_ < DATE '2025-12-02'

--- calculation_logic
CASE
  WHEN SUM(active_sessions) = 0
  THEN 0
  ELSE ROUND(SUM(bot_feedback_given) * 100.0 / SUM(active_sessions), 2)
END AS feedback_received_pct,
CASE
  WHEN SUM(bot_feedback_given) = 0
  THEN 0
  ELSE ROUND(SUM(bot_happy) * 100.0 / SUM(feedback_given), 2)
END AS msat_pct




## Ticket MSAT + Feedback Rate %

This metric tracks customer feedback effectiveness and satisfaction in the care support system. It measures two key performance indicators: the percentage of support tickets that received agent feedback from customers, and the percentage of positive satisfaction (MSAT) among those who provided feedback. The metrics help evaluate both the feedback collection process efficiency and actual customer satisfaction with agent support. Data is filtered to show the last week's performance and is aggregated daily to track trends. The calculations include zero-division protection to ensure robust reporting even when no tickets or feedback are recorded on specific days.

-- tables_involved
hive.team_cst_mhd_product.mhd_msat_monthly_dashboard1 msat

--- standard filters to be applied unless specifically requested for a different time period
--- temporal filter for recent performance tracking (last week by default)
msat.date_ >= CURRENT_DATE - INTERVAL '7' DAY AND
msat.date_ < CURRENT_DATE

--- calculation_logic
CASE
  WHEN SUM(msat.fd_tickets) = 0 THEN 0
  ELSE ROUND(SUM(msat.agent_feedback_given) * 100.0 / SUM(msat.fd_tickets), 2)
END AS feedback_received_pct,
CASE
  WHEN SUM(msat.agent_feedback_given) = 0 THEN 0
  ELSE ROUND(SUM(msat.agent_happy) * 100.0 / SUM(msat.agent_feedback_given), 2)
END AS msat_pct




## Ticket MSAT + Feedback Rate %

This metric tracks customer service feedback collection effectiveness and satisfaction rates for MHD (customer care). Feedback Received % measures what portion of total tickets received agent feedback, while MSAT % shows the satisfaction rate among customers who provided feedback. The metrics are filtered to last week's data and grouped by day to show daily trends. Both calculations include zero-division protection to handle cases where no tickets exist or no feedback was given. This helps customer care teams monitor both their feedback collection process efficiency and actual customer satisfaction levels, providing insights into service quality and engagement rates.

-- tables_involved
hive.team_cst_mhd_product.mhd_msat_monthly_dashboard1 msat

--- standard filters to be applied unless specifically requested for a different time period
--- temporal filter for recent performance analysis
msat.date_ >= CURRENT_DATE - INTERVAL '7' DAY AND
msat.date_ < CURRENT_DATE

--- calculation_logic
CASE
  WHEN SUM(fd_tickets) = 0 THEN 0
  ELSE ROUND(SUM(agent_feedback_given) * 100.0 / SUM(fd_tickets), 2)
END AS feedback_received_pct,
CASE
  WHEN SUM(agent_feedback_given) = 0 THEN 0
  ELSE ROUND(SUM(agent_happy) * 100.0 / SUM(agent_feedback_given), 2)
END AS msat_pct




## Intent wise Ticket Only MSAT %

Bot MSAT % measures the mean satisfaction percentage for bot interactions across different customer service entities in the MHD (Merchant Help Desk) system. This metric tracks agent satisfaction by calculating the ratio of positive feedback (agent_happy) to total feedback received (agent_feedback_given), expressed as a percentage. The analysis focuses on bot performance over the last week and excludes non-relevant entities like IVR merchant services, P4B soundbox, and wealth management channels. This helps identify which customer service entities are delivering satisfactory bot experiences and enables performance optimization across different service channels within the care ecosystem.

-- tables_involved
hive.team_cst_mhd_product.mhd_msat_monthly_dashboard1 msat

--- standard filters to be applied unless specifically requested for a different time period
--- temporal filter for recent performance analysis
msat.date_ >= DATE '2025-11-25' AND msat.date_ < DATE '2025-12-02' AND

--- specific filters
--- exclude non-bot service channels that are not relevant for bot satisfaction analysis
msat.cst_entity NOT IN ('ivr-merchant', 'p4bsoundbox', 'all_others', 'p4bwealth')

--- calculation_logic
CASE 
  WHEN SUM(agent_feedback_given) = 0.00 THEN 0.00
  ELSE SUM(agent_happy) * 100.00 / SUM(agent_feedback_given)
END as bot_msat_percentage




## Service Ticket MSAT + Feedback Rate %

This metric tracks customer service performance through two key indicators: feedback collection rate and customer satisfaction scores. The Feedback Received % measures what proportion of service tickets (fd_tickets) result in customer feedback (service_feedback_given), while MSAT % calculates the satisfaction rate among customers who provided feedback (service_happy divided by service_feedback_given). Both percentages include zero-division protection and are rounded to two decimal places. The analysis is typically filtered to recent time periods (last week by default) and grouped by day to show daily trends in customer service engagement and satisfaction levels.

-- tables_involved
hive.team_cst_mhd_product.mhd_msat_monthly_dashboard1 msat

--- standard filters to be applied unless specifically requested for a different time period
--- temporal filter for recent service performance analysis
msat.date_ >= DATE '2025-11-25' AND msat.date_ < DATE '2025-12-02'

--- specific filters
--- exclude future dates to ensure data accuracy
msat.date_ < CURRENT_DATE

--- calculation_logic
CASE WHEN SUM(fd_tickets) = 0 THEN 0 ELSE ROUND(SUM(service_feedback_given) * 100.0 / SUM(fd_tickets), 2) END as feedback_received_pct,
CASE WHEN SUM(service_feedback_given) = 0 THEN 0 ELSE ROUND(SUM(service_happy) * 100.0 / SUM(service_feedback_given), 2) END as msat_pct




## Intent wise Ticket Only MSAT %

This metric tracks Bot MSAT (Merchant Satisfaction) percentage across different customer entities, measuring the ratio of positive agent feedback to total feedback given. It calculates satisfaction as a percentage where agent_happy responses are divided by total agent_feedback_given, with zero-division protection returning 0% when no feedback exists. The analysis focuses on the previous week's performance and excludes non-merchant entities like IVR merchant, soundbox services, and wealth products to maintain focus on core merchant satisfaction metrics. This KPI helps evaluate bot performance effectiveness in resolving merchant queries and maintaining satisfaction levels across different customer segments.

-- tables_involved
hive.team_cst_mhd_product.mhd_msat_monthly_dashboard1 msat

--- standard filters to be applied unless specifically requested for a different time period
--- temporal filter for weekly performance analysis
msat.date_ >= DATE(CURRENT_DATE - INTERVAL '7' DAY) AND msat.date_ < CURRENT_DATE AND

--- standard filters to focus on relevant merchant entities
--- exclude non-merchant services and miscellaneous categories
msat.cst_entity NOT IN ('ivr-merchant', 'p4bsoundbox', 'all_others', 'p4bwealth')

--- calculation_logic
CASE 
  WHEN SUM(agent_feedback_given) = 0.00 THEN 0.00
  ELSE SUM(agent_happy) * 100.00 / SUM(agent_feedback_given)
END as bot_msat_percentage




## Service Ticket MSAT + Feedback Rate %

This metric tracks customer service performance through two complementary KPIs for the Care Dashboard-MHD system. The "Feedback Received %" measures the percentage of service tickets (fd_tickets) that received customer feedback (service_feedback_given), indicating the effectiveness of feedback collection processes. The "MSAT %" (satisfaction rate) calculates the percentage of positive responses (service_happy) among customers who provided feedback, measuring actual customer satisfaction levels. Both metrics include zero-division protection and are typically viewed for recent time periods to monitor service quality trends. These metrics help evaluate both the reach of feedback collection efforts and the quality of service delivery, providing insights into customer experience and service team performance.

-- tables_involved
hive.team_cst_mhd_product.mhd_msat_monthly_dashboard1 msat

--- standard filters to be applied unless specifically requested for a different categorical value
--- temporal filter for recent performance analysis
msat.date_ >= DATE '2025-11-25' AND msat.date_ < DATE '2025-12-02'

--- calculation_logic
CASE
  WHEN SUM(fd_tickets) = 0 THEN 0
  ELSE ROUND(SUM(service_feedback_given) * 100.0 / SUM(fd_tickets), 2)
END AS feedback_received_pct,
CASE
  WHEN SUM(service_feedback_given) = 0 THEN 0
  ELSE ROUND(SUM(service_happy) * 100.0 / SUM(service_feedback_given), 2)
END AS msat_pct




## Bot CTR % (Distinct User Level)

This metric measures Call-to-Action (CTA) click-through rates at the distinct user level for the MHD care dashboard, tracking user engagement with different CTA types. It calculates the percentage of users who clicked on CTAs out of those who were shown them, providing insights into CTA effectiveness. The analysis is filtered to MHD client type and covers the last week's data, segmented by CTA type (event_label2). This helps identify which CTAs are most effective at driving user interaction and can inform UX optimization decisions. The metric prevents division by zero and returns null when no users were shown a particular CTA.

-- tables_involved
hive.team_cst_mhd_product.cst_mhd_ctr virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- limit analysis to MHD client type for care dashboard context
virtual_table.client_type = 'MHD' AND
--- temporal filter for recent performance analysis
virtual_table.date_ >= DATE '2025-11-25' AND virtual_table.date_ < DATE '2025-12-02'

--- specific filters
--- group by CTA type for segmented analysis
GROUP BY virtual_table.event_label2

--- calculation_logic
sum(virtual_table.users_shown) as cta_displayed,
sum(virtual_table.users_clicked) as cta_clicked,
CASE 
  WHEN SUM(virtual_table.users_shown) = 0 THEN NULL
  ELSE CAST((SUM(virtual_table.users_clicked) * 100) AS DOUBLE)/ CAST(SUM(virtual_table.users_shown) AS DOUBLE)
END as ctr_percentage




## Bot CTR % (Distinct User Level)

Bot CTR % measures click-through rate effectiveness for call-to-action elements within the MHD mobile health application at the distinct user level. This metric calculates the percentage of users who clicked on specific CTAs after being displayed them, providing insights into user engagement and interface effectiveness. The analysis is filtered to MHD client type and covers the last week's performance data. Results are segmented by CTA type (event_label2) and ranked by display volume to prioritize high-traffic CTAs. The metric includes safeguards against division by zero and presents three complementary measurements: total users shown CTAs, users who clicked, and the resulting conversion percentage for optimizing user experience design.

-- tables_involved
hive.team_cst_mhd_product.cst_mhd_ctr ctr

--- standard filters to be applied unless specifically requested for a different categorical value
--- restrict analysis to Mobile Health Dashboard client application
ctr.client_type = 'MHD' AND
--- temporal scope for weekly performance analysis
ctr.date_ >= DATE '2025-11-25' AND ctr.date_ < DATE '2025-12-02'

--- calculation_logic
sum(ctr.users_shown) as cta_displayed_count,
sum(ctr.users_clicked) as cta_clicked_count,
CASE 
  WHEN SUM(ctr.users_shown) = 0 THEN NULL
  ELSE CAST((SUM(ctr.users_clicked) * 100) AS DOUBLE) / CAST(SUM(ctr.users_shown) AS DOUBLE)
END as ctr_percentage




## Weekly_Metrics_Insights_MHD

This metric provides a comprehensive weekly overview of MHD (Multi-Channel Help Desk) performance across all customer service channels including IVR calls, bot interactions, and human agent support. It tracks key operational metrics such as contact ratios (percentage of customers using each channel relative to the base customer count), customer satisfaction scores (MSAT), feedback response rates, and escalation patterns between service tiers. The metrics help evaluate the effectiveness of automated channels (IVR and bot) versus human agents, measure customer satisfaction levels, and analyze how tickets flow from bot interactions to either MHD agents or specialized service teams. This comprehensive view enables performance monitoring and optimization of the entire customer support ecosystem.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - includes all MHD data

--- specific filters
--- no specific filters applied - comprehensive view of all weekly metrics

--- calculation_logic
pattern: percentage_ratio_with_nullif_protection
pattern: contact_ratio_calculation
pattern: satisfaction_percentage_calculation




## Weekly_Metrics_Insights_MHD

This metric provides comprehensive weekly insights into MHD (Multi-Channel Help Desk) performance across multiple customer service channels including IVR calls, bot interactions, and agent support. It tracks key operational metrics such as contact volumes, customer satisfaction scores (MSAT), feedback response rates, and escalation patterns between bot and human agents. The analysis includes contact ratios calculated against a base count, passthrough rates showing escalation from bot to MHD agents or service teams, and satisfaction percentages for both bot and agent interactions. This consolidated view enables management to monitor service quality, channel effectiveness, and customer experience trends on a weekly basis for strategic decision-making and operational optimization.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no specific filters applied - includes all available data

--- specific filters
--- no additional filters specified

--- calculation_logic
pattern: contact_ratio_calculation
pattern: satisfaction_percentage_calculation  
pattern: passthrough_rate_calculation
week_dimension: min(created_week)
volume_metrics: sum(ivr_calls), sum(bot_ticket_count), sum(agent_ticket_count_bot), sum(bot_to_service_ticket_count)
combined_agent_tickets: sum(agent_ticket_count_bot) + sum(bot_to_service_ticket_count)




## Weekly_Metrics_Insights_1_MHD

This comprehensive weekly customer service metrics dashboard tracks the complete MHD operational funnel from initial customer contact through resolution and satisfaction measurement. It monitors contact volumes via IVR calls and bot tickets, calculates contact ratios normalized against base counts, tracks escalation pathways including bot-to-MHD and bot-to-service passthrough rates, and measures customer satisfaction through feedback collection percentages and MSAT scores for both bot and human agent interactions. The metrics provide operational insights into channel efficiency, escalation patterns, and service quality across the multi-channel help desk ecosystem, enabling performance optimization and resource allocation decisions.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no specific filters applied - shows all available data

--- specific filters
--- no additional filters specified

--- calculation_logic
pattern: weekly_customer_service_metrics
base_metrics: SUM(ivr_calls), SUM(bot_ticket_count), SUM(agent_ticket_count_bot), SUM(bot_to_service_ticket_count)
ratio_calculations: contact_ratio_percentage, passthrough_percentage, feedback_percentage, msat_percentage
time_dimension: MIN(created_week)




## Monthly_Metrics_Insights_MHD

Monthly MHD Metrics Insights tracks comprehensive customer service performance across multiple channels including IVR calls, bot interactions, and human agent support. This dashboard aggregates monthly data to measure contact ratios (IVR and bot volume relative to customer base), satisfaction scores (MSAT percentages), feedback collection rates, and escalation patterns from bot to human agents. The metrics provide insights into customer service efficiency, channel effectiveness, and quality measurements through satisfaction feedback. Key performance indicators include bot-to-agent passthrough rates, feedback collection percentages, and satisfaction scores across different service touchpoints, enabling management to assess overall service quality and channel optimization opportunities.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - chart shows all monthly data

--- specific filters
--- no specific filters applied - aggregates all available monthly data

--- calculation_logic
pattern: contact_ratio_percentage
pattern: satisfaction_percentage_calculation
pattern: passthrough_percentage_calculation
SUM(agent_ticket_count_bot) + SUM(bot_to_service_ticket_count) as combined_agent_tickets




## Weekly_Metrics_Insights_1_MHD

Weekly MHD Metrics Insights tracks comprehensive customer service operations across multiple channels including IVR, chatbot, and human agent interactions. The metrics measure contact volume, service efficiency ratios calculated against a base count denominator, customer satisfaction through feedback percentages and MSAT scores, and operational flow tracking bot-to-agent passthrough rates. This consolidated view enables monitoring of the entire customer support funnel from initial contact through resolution, helping identify bottlenecks and optimization opportunities in the MHD service delivery model across weekly time periods.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no specific filters applied - captures all MHD service data

--- specific filters
--- no additional filtering - comprehensive weekly aggregation

--- calculation_logic
pattern: contact_ratio_calculation
pattern: feedback_satisfaction_metrics
pattern: passthrough_rate_calculation
specific: SUM(agent_ticket_count_bot)+SUM(bot_to_service_ticket_count) as combined_agent_tickets




## Monthly_Metrics_Insights_MHD

This comprehensive MHD customer service dashboard tracks the complete customer support journey across multiple touchpoints including IVR calls, bot interactions, and human agent escalations. It measures key performance indicators such as contact ratios (percentage of customers using each channel), satisfaction scores (MSAT), feedback collection rates, and channel passthrough percentages (bot to human agent escalation rates). The metrics provide monthly aggregated insights into customer service efficiency, channel effectiveness, and satisfaction outcomes. All calculations use null-safe ratio formulas to ensure accurate percentage computations even when denominators are zero, enabling reliable month-over-month performance tracking and identifying optimization opportunities across the customer service ecosystem.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no additional filters applied - shows all monthly data

--- specific filters
--- no specific filters applied

--- calculation_logic
pattern: percentage_ratio_calculation
base_metrics: sum(ivr_calls), sum(bot_ticket_count), sum(bot_total_responses), sum(bot_positive_response), sum(agent_ticket_count_bot), sum(bot_to_service_ticket_count), sum(agent_tickets_feedback_received), sum(agent_tickets_msat_received)
denominators: max(cr_base_count), sum(bot_active_ticket_count), sum(bot_total_responses), sum(agent_tickets_for_response)
additional: min(created_month) for time dimension, combined ticket counts for total escalations




## Monthly_Metrics_Insights_MHD

Monthly MHD Insights tracks comprehensive customer support performance metrics including IVR call volumes, bot interaction statistics, agent ticket counts, and satisfaction scores across different support channels. The metrics provide visibility into contact ratios (how many customers use IVR/bot relative to the base), bot effectiveness through MSAT scores and passthrough rates, and agent performance through feedback percentages. Key performance indicators include bot-to-human handoff rates for both MHD agents and service teams, customer satisfaction percentages, and overall ticket volumes to assess support channel efficiency and customer experience quality month over month.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - shows all monthly data

--- specific filters
--- no specific filters applied - comprehensive monthly view

--- calculation_logic
pattern: percentage_with_nullif_protection
pattern: contact_ratio_calculation
pattern: satisfaction_score_calculation




## Monthly_Metrics_Insights_MHD

This comprehensive monthly metrics dashboard tracks customer care performance across multiple service channels including IVR, chatbot, and human agents. It measures contact volumes (IVR calls, bot tickets), contact ratios as percentages of the customer base, customer satisfaction metrics (feedback rates and MSAT scores), and operational efficiency through passthrough rates between service tiers. The metrics provide insights into channel utilization, customer engagement levels, service quality through satisfaction scores, and operational flow efficiency from bot to human agents. This enables monitoring of overall customer care ecosystem health, identifying bottlenecks in service delivery, and measuring both quantitative performance (volumes, ratios) and qualitative outcomes (customer satisfaction) across the integrated support infrastructure.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd combined_data

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - shows all monthly data

--- specific filters
--- no specific filters applied - comprehensive monthly view

--- calculation_logic
pattern: contact_ratio_calculation
pattern: feedback_percentage_calculation
pattern: satisfaction_percentage_calculation
pattern: passthrough_rate_calculation
SUM(agent_ticket_count_bot) + SUM(bot_to_service_ticket_count) as combined_agent_tickets,
MIN(created_month) as month_identifier




## Monthly Sessions + Agent Handover + Service Tickets

This chart tracks three essential customer care operational metrics on a monthly basis for the MHD (Mental Health Dashboard) care system. Active Sessions measures the total volume of customer interactions or support sessions handled each month, providing insight into customer engagement levels and support demand. Agent Tickets represents the number of support cases escalated to human agents, indicating complex issues requiring personalized assistance. Service Tickets captures the total volume of service requests or technical issues raised by customers. The temporal filter restricts analysis to current year data starting from February 2025, enabling teams to monitor monthly trends in customer support workload, escalation patterns, and service request volumes to optimize staffing and identify operational improvements.

-- tables_involved
hive.team_cst_mhd_product.mhd_monthly_dashboard1 dashboard

--- standard filters to be applied unless specifically requested for a different temporal range
--- temporal filter for current year analysis starting from February 2025
dashboard.date_ >= DATE '2025-02-01' AND
--- upper bound filter to current date for real-time analysis
dashboard.date_ < DATE '2025-12-02'

--- calculation_logic
sum(dashboard.active_sessions) as active_sessions,
sum(dashboard.agent_tickets) as agent_tickets, 
sum(dashboard.service_tickets) as service_tickets




## Monthly_Metrics_Insights_MHD_

This dashboard tracks monthly customer service performance metrics across multiple channels including IVR calls, bot interactions, and human agent escalations. It measures contact ratios showing volume relative to customer base, bot effectiveness through feedback percentages and satisfaction scores (MSAT), escalation patterns from bot to both MHD agents and service teams, and overall agent performance metrics. The data provides operational insights for optimizing customer service delivery, identifying bottlenecks in the support funnel, and monitoring satisfaction trends across automated and human-assisted service channels. All metrics are aggregated at monthly level without additional filters applied.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no specific filters applied - showing all available monthly data

--- specific filters
--- no additional filtering conditions

--- calculation_logic
pattern: percentage_ratio_calculations
base_metrics: SUM(ivr_calls), SUM(bot_ticket_count), SUM(bot_total_responses), SUM(bot_positive_response), SUM(agent_ticket_count_bot), SUM(bot_to_service_ticket_count), SUM(agent_tickets_feedback_received), SUM(agent_tickets_msat_received)
denominators: MAX(cr_base_count), SUM(bot_active_ticket_count), SUM(bot_total_responses), SUM(agent_tickets_for_response)




## Monthly_Metrics_Insights_MHD_

This metric tracks comprehensive monthly performance across the MHD care ecosystem, measuring customer support effectiveness from initial contact through resolution. It encompasses IVR call volumes, bot interaction metrics including ticket counts and satisfaction scores, agent handoff rates from bot to both MHD and service teams, and feedback collection rates. The metrics provide a complete view of support channel performance including contact ratios (percentage of customers using each channel), satisfaction rates (MSAT percentages), and operational efficiency through passthrough rates showing how often automated channels escalate to human agents. This enables monthly performance tracking and optimization of the multi-channel support funnel.

-- tables_involved
hive.team_servicesone.combined_data_project_servicesone_mhd virtual_table

--- standard filters to be applied unless specifically requested for a different categorical value
--- no standard filters applied - organization-wide monthly aggregation

--- specific filters
--- no specific filters applied - comprehensive monthly view

--- calculation_logic
pattern: monthly_care_metrics_aggregation
base_metrics: [ivr_calls, bot_ticket_count, agent_ticket_count_bot, bot_to_service_ticket_count]
ratio_calculations: contact_ratios, feedback_percentages, satisfaction_scores, passthrough_rates
time_dimension: created_month (MIN for grouping)




## Monthly Sessions + Agent Handover + Service Tickets

This metric tracks monthly customer care activity across three key dimensions: active user sessions, agent-handled tickets, and service tickets. It provides a comprehensive view of customer support volume and engagement patterns for the MHD product area. The data is aggregated monthly to show trends in customer interaction levels, support demand, and service delivery capacity. This consolidated view helps care teams understand seasonal patterns, resource allocation needs, and overall customer engagement health by combining self-service activity (sessions) with assisted support metrics (agent and service tickets).

-- tables_involved
hive.team_cst_mhd_product.mhd_monthly_dashboard1 dashboard

--- standard filters to be applied unless specifically requested for a different categorical value
--- temporal filter for current year data
dashboard.date_ >= DATE '2025-02-01' AND dashboard.date_ < current_date + interval '1' day

--- calculation_logic
sum(dashboard.active_sessions) as active_sessions,
sum(dashboard.agent_tickets) as agent_tickets,
sum(dashboard.service_tickets) as service_tickets,
date_trunc('month', dashboard.date_) as month



